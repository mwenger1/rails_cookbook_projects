

Started GET "/" for 127.0.0.1 at 2014-01-12 12:33:41 +0800
Processing by Rails::WelcomeController#index as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/railties-4.0.2/lib/rails/templates/rails/welcome/index.html.erb (15.5ms)
Completed 200 OK in 211ms (Views: 157.2ms)


Started GET "/products" for 127.0.0.1 at 2014-01-12 12:33:47 +0800

ActionController::RoutingError (No route matches [GET] "/products"):
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (52.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (273.2ms)


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 12:33:56 +0800
Processing by Ecom::ProductsController#index as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-fa45b89c2e65/app/views/ecom/products/index.html.erb within layouts/ecom/application (201.7ms)
Completed 500 Internal Server Error in 274ms

ActionView::Template::Error (
Problem:
  No configuration could be found for a session named 'default'.
Summary:
  When attempting to create the new session, Mongoid could not find a session configuration for the name: 'default'. This is necessary in order to know the host, port, and options needed to connect.
Resolution:
  Double check your mongoid.yml to make sure under the sessions key that a configuration exists for 'default'. If you have set the configuration programatically, ensure that 'default' exists in the configuration hash.):
    13:   </thead>
    14: 
    15:   <tbody>
    16:     <% @products.each do |product| %>
    17:       <tr>
    18:         <td><%= product.name %></td>
    19:         <td><%= product.description %></td>
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions/factory.rb:27:in `create'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions.rb:65:in `with_name'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions.rb:105:in `mongo_session'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions.rb:121:in `collection'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions/options.rb:161:in `method_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual/mongo.rb:265:in `initialize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual.rb:53:in `new'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual.rb:53:in `create_context'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual.rb:35:in `context'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual.rb:19:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-fa45b89c2e65/app/views/ecom/products/index.html.erb:16:in `__home_rwub__rvm_gems_ruby_______p____bundler_gems_ecom_fa__b__c_e___app_views_ecom_products_index_html_erb___3926380840623035864_15406660'
  actionpack (4.0.2) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.2) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.2) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.2) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__59711623953482269__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__28632316493336759__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (33.5ms)


Started GET "/ecom" for 127.0.0.1 at 2014-01-12 12:33:57 +0800
Processing by Ecom::ProductsController#index as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-fa45b89c2e65/app/views/ecom/products/index.html.erb within layouts/ecom/application (2.8ms)
Completed 500 Internal Server Error in 10ms

ActionView::Template::Error (
Problem:
  No configuration could be found for a session named 'default'.
Summary:
  When attempting to create the new session, Mongoid could not find a session configuration for the name: 'default'. This is necessary in order to know the host, port, and options needed to connect.
Resolution:
  Double check your mongoid.yml to make sure under the sessions key that a configuration exists for 'default'. If you have set the configuration programatically, ensure that 'default' exists in the configuration hash.):
    13:   </thead>
    14: 
    15:   <tbody>
    16:     <% @products.each do |product| %>
    17:       <tr>
    18:         <td><%= product.name %></td>
    19:         <td><%= product.description %></td>
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions/factory.rb:27:in `create'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions.rb:65:in `with_name'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions.rb:105:in `mongo_session'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions.rb:121:in `collection'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/sessions/options.rb:161:in `method_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual/mongo.rb:265:in `initialize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual.rb:53:in `new'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual.rb:53:in `create_context'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual.rb:35:in `context'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-5915e9f576ea/lib/mongoid/contextual.rb:19:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-fa45b89c2e65/app/views/ecom/products/index.html.erb:16:in `__home_rwub__rvm_gems_ruby_______p____bundler_gems_ecom_fa__b__c_e___app_views_ecom_products_index_html_erb___3926380840623035864_15406660'
  actionpack (4.0.2) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.2) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.2) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.2) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__59711623953482269__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__28632316493336759__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (24.8ms)


Started GET "/ecom" for 127.0.0.1 at 2014-01-12 12:34:55 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 7.8154ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 11.4357ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-fa45b89c2e65/app/views/ecom/products/index.html.erb within layouts/ecom/application (31.9ms)
Completed 200 OK in 586ms (Views: 498.9ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 12:34:56 +0800


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 12:35:03 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-fa45b89c2e65/app/views/ecom/products/_form.html.erb (175.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-fa45b89c2e65/app/views/ecom/products/new.html.erb within layouts/ecom/application (190.2ms)
Completed 200 OK in 208ms (Views: 206.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 12:35:03 +0800


Started GET "/" for 127.0.0.1 at 2014-01-12 12:35:49 +0800
Processing by Rails::WelcomeController#index as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/railties-4.0.2/lib/rails/templates/rails/welcome/index.html.erb (1.8ms)
Completed 200 OK in 7ms (Views: 5.9ms)


Started GET "/ecom/categories" for 127.0.0.1 at 2014-01-12 13:40:48 +0800
Processing by Ecom::CategoriesController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1234ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_categories selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.3831ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a4b023a29c92/app/views/ecom/categories/index.html.erb within layouts/ecom/application (11.7ms)
Completed 200 OK in 402ms (Views: 316.5ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:49 +0800


Started GET "/ecom/categories/new" for 127.0.0.1 at 2014-01-12 13:40:51 +0800
Processing by Ecom::CategoriesController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a4b023a29c92/app/views/ecom/categories/_form.html.erb (122.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a4b023a29c92/app/views/ecom/categories/new.html.erb within layouts/ecom/application (136.7ms)
Completed 200 OK in 164ms (Views: 162.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:51 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:51 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:51 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 13:40:51 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:51 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:51 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:51 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:52 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 13:40:52 +0800


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 14:27:30 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7224ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.3436ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a4b023a29c92/app/views/ecom/products/index.html.erb within layouts/ecom/application (5.1ms)
Completed 200 OK in 80ms (Views: 20.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 14:27:31 +0800


Started GET "/" for 127.0.0.1 at 2014-01-12 14:48:03 +0800
Processing by Rails::WelcomeController#index as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/railties-4.0.2/lib/rails/templates/rails/welcome/index.html.erb (1.8ms)
Completed 200 OK in 6ms (Views: 5.4ms)


Started GET "/" for 127.0.0.1 at 2014-01-12 15:24:47 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 1132ms (Views: 1129.7ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-12 15:24:49 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-12 15:24:49 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 15:24:49 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-12 15:24:49 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-12 15:24:49 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-12 15:24:49 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 15:24:49 +0800


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 15:25:14 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0250ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4993ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a4b023a29c92/app/views/ecom/products/index.html.erb within layouts/ecom/application (12.2ms)
Completed 200 OK in 88ms (Views: 35.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:14 +0800


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 15:25:16 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a4b023a29c92/app/views/ecom/products/_form.html.erb (8.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a4b023a29c92/app/views/ecom/products/new.html.erb within layouts/ecom/application (11.7ms)
Completed 200 OK in 30ms (Views: 28.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 15:25:17 +0800


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 15:47:54 +0800
Processing by Ecom::ProductsController#new as HTML
Completed 500 Internal Server Error in 86ms

NameError (uninitialized constant CarrierWave):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/uploaders/ecom/image_uploader.rb:3:in `<top (required)>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/models/ecom/product.rb:10:in `<class:Product>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/models/ecom/product.rb:2:in `<module:Ecom>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/models/ecom/product.rb:1:in `<top (required)>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/controllers/ecom/products_controller.rb:18:in `new'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__4192343071053799060__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2487670903438954436__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (60.5ms)


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 15:51:19 +0800
Processing by Ecom::ProductsController#new as HTML
Completed 500 Internal Server Error in 95ms

LoadError (Unable to autoload constant Ecom::ImageUploader, expected /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/uploaders/ecom/image_uploader.rb to define it):
  activesupport (4.0.2) lib/active_support/dependencies.rb:464:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  activesupport (4.0.2) lib/active_support/dependencies.rb:495:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/models/ecom/product.rb:10:in `<class:Product>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/models/ecom/product.rb:2:in `<module:Ecom>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/models/ecom/product.rb:1:in `<top (required)>'
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `block in load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:616:in `new_constants_in'
  activesupport (4.0.2) lib/active_support/dependencies.rb:423:in `load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:324:in `require_or_load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:463:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  activesupport (4.0.2) lib/active_support/dependencies.rb:495:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-889fa2bc7451/app/controllers/ecom/products_controller.rb:18:in `new'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__4019414224391288182__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4350398537678836618__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (37.0ms)


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 15:58:12 +0800
Processing by Ecom::ProductsController#new as HTML
Completed 500 Internal Server Error in 165ms

NoMethodError (undefined method `mount_uploader' for Ecom::Product:Class):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-93f89e8f4c8e/app/models/ecom/product.rb:10:in `<class:Product>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-93f89e8f4c8e/app/models/ecom/product.rb:2:in `<module:Ecom>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-93f89e8f4c8e/app/models/ecom/product.rb:1:in `<top (required)>'
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `block in load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:616:in `new_constants_in'
  activesupport (4.0.2) lib/active_support/dependencies.rb:423:in `load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:324:in `require_or_load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:463:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  activesupport (4.0.2) lib/active_support/dependencies.rb:495:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-93f89e8f4c8e/app/controllers/ecom/products_controller.rb:18:in `new'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__1526367244328457554__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2535426591831742501__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (101.4ms)


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 16:04:02 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-93f89e8f4c8e/app/views/ecom/products/_form.html.erb (133.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-93f89e8f4c8e/app/views/ecom/products/new.html.erb within layouts/ecom/application (215.4ms)
Completed 200 OK in 676ms (Views: 571.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 16:04:03 +0800


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 16:07:33 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-08f614d88297/app/views/ecom/products/_form.html.erb (147.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-08f614d88297/app/views/ecom/products/new.html.erb within layouts/ecom/application (241.7ms)
Completed 200 OK in 784ms (Views: 655.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 16:07:34 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 16:07:34 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 16:07:34 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 16:07:34 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 16:07:34 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 16:07:34 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 16:07:34 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 16:07:34 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 16:07:35 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 16:07:35 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 16:07:35 +0800


Started POST "/ecom/products" for 127.0.0.1 at 2014-01-12 16:08:28 +0800
Processing by Ecom::ProductsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4IiQJPpgakjE6V7MlwnhNFMfe59L+SbC0AQUHlc8sbQ=", "product"=>{"name"=>"Test", "sku"=>"A123", "description"=>"Test", "base_price"=>"20", "image"=>#<ActionDispatch::Http::UploadedFile:0x00000002e6f350 @tempfile=#<File:/tmp/RackMultipart20140112-26726-1rhjab9>, @original_filename="top.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"top.jpg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Create Product"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1872ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_products documents=[{"_id"=>BSON::ObjectId('52d24d7d7277756866000000'), "name"=>"Test", "description"=>"Test", "base_price"=>20.0, "sku"=>"A123", "image"=>"top.jpg"}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 446.0236ms
Redirected to http://localhost:3000/ecom/products/52d24d7d7277756866000000
Completed 302 Found in 538ms


Started GET "/ecom/products/52d24d7d7277756866000000" for 127.0.0.1 at 2014-01-12 16:08:29 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"52d24d7d7277756866000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52d24d7d7277756866000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6834ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-08f614d88297/app/views/ecom/products/show.html.erb within layouts/ecom/application (5.2ms)
Completed 200 OK in 27ms (Views: 22.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:29 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:30 +0800


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 16:08:36 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7630ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5588ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-08f614d88297/app/views/ecom/products/index.html.erb within layouts/ecom/application (9.4ms)
Completed 200 OK in 29ms (Views: 27.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:36 +0800


Started DELETE "/ecom/products/52d24d7d7277756866000000" for 127.0.0.1 at 2014-01-12 16:08:41 +0800
Processing by Ecom::ProductsController#destroy as HTML
  Parameters: {"authenticity_token"=>"4IiQJPpgakjE6V7MlwnhNFMfe59L+SbC0AQUHlc8sbQ=", "id"=>"52d24d7d7277756866000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7513ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52d24d7d7277756866000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5779ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52d24d7d7277756866000000')} flags=[:remove_first]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 16.8502ms
Redirected to http://localhost:3000/ecom/products
Completed 302 Found in 25ms


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 16:08:41 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4305ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-08f614d88297/app/views/ecom/products/index.html.erb within layouts/ecom/application (1.9ms)
Completed 200 OK in 23ms (Views: 21.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 16:08:41 +0800


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 16:54:39 +0800
Processing by Ecom::ProductsController#index as HTML
Completed 500 Internal Server Error in 95ms

NameError (uninitialized constant Mongoid::Slug):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-4f4a0d9b42cf/app/models/ecom/product.rb:4:in `<class:Product>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-4f4a0d9b42cf/app/models/ecom/product.rb:2:in `<module:Ecom>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-4f4a0d9b42cf/app/models/ecom/product.rb:1:in `<top (required)>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-4f4a0d9b42cf/app/controllers/ecom/products_controller.rb:9:in `index'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__1019604445606478186__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3552762854373323943__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.1ms)


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 16:57:22 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2487ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.3791ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-4f4a0d9b42cf/app/views/ecom/products/index.html.erb within layouts/ecom/application (77.6ms)
Completed 200 OK in 511ms (Views: 405.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:22 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:22 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:22 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:22 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:22 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:22 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:23 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:23 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:23 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:23 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:23 +0800


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 16:57:26 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-4f4a0d9b42cf/app/views/ecom/products/_form.html.erb (283.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-4f4a0d9b42cf/app/views/ecom/products/new.html.erb within layouts/ecom/application (296.8ms)
Completed 200 OK in 314ms (Views: 313.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 16:57:27 +0800


Started POST "/ecom/products" for 127.0.0.1 at 2014-01-12 17:00:26 +0800
Processing by Ecom::ProductsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4IiQJPpgakjE6V7MlwnhNFMfe59L+SbC0AQUHlc8sbQ=", "product"=>{"name"=>"Dan Brown - Inferno", "sku"=>"DBI1", "description"=>"Robert Langond's Latest Adventure", "base_price"=>"10", "image"=>#<ActionDispatch::Http::UploadedFile:0x0000000344dee8 @tempfile=#<File:/tmp/RackMultipart20140112-29856-xa0xs6>, @original_filename="danbrown.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"danbrown.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Create Product"}
Completed 500 Internal Server Error in 30ms

NoMethodError (undefined method `title' for #<Ecom::Product:0x0000000358b300>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug.rb:269:in `block in pre_slug_string'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug.rb:269:in `map'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug.rb:269:in `pre_slug_string'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug.rb:204:in `slug_builder'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug.rb:84:in `block in slug'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug/unique_slug.rb:78:in `call'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug/unique_slug.rb:78:in `find_unique'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug.rb:173:in `find_unique_slug'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug.rb:150:in `set_slug'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug.rb:144:in `build_slug'
  activesupport (4.0.2) lib/active_support/callbacks.rb:377:in `_run__2337547340845439690__save__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/persistable/creatable.rb:115:in `prepare_insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/persistable/creatable.rb:23:in `insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/persistable/savable.rb:23:in `save'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-4f4a0d9b42cf/app/controllers/ecom/products_controller.rb:29:in `create'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__3791070581561789090__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2409979960868437110__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (53.0ms)


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 17:03:04 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.7644ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5093ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/index.html.erb within layouts/ecom/application (107.7ms)
Completed 200 OK in 782ms (Views: 610.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:06 +0800


Started GET "/ecom/products/new" for 127.0.0.1 at 2014-01-12 17:03:07 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/_form.html.erb (254.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/new.html.erb within layouts/ecom/application (269.3ms)
Completed 200 OK in 286ms (Views: 284.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:07 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:08 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:08 +0800


Started POST "/ecom/products" for 127.0.0.1 at 2014-01-12 17:03:26 +0800
Processing by Ecom::ProductsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4IiQJPpgakjE6V7MlwnhNFMfe59L+SbC0AQUHlc8sbQ=", "product"=>{"name"=>"Dan Brown - Inferno", "sku"=>"A123", "description"=>"Robert Langond's Latest Adventure", "base_price"=>"10", "image_cache"=>""}, "commit"=>"Create Product"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1119ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$all"=>[/^dan\-brown\-inferno(?:-(\d+))?$/]}, "_id"=>{"$ne"=>BSON::ObjectId('52d25a5e727775796a000000')}} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 17.1668ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_products documents=[{"_id"=>BSON::ObjectId('52d25a5e727775796a000000'), "_slugs"=>["dan-brown-inferno"], "name"=>"Dan Brown - Inferno", "description"=>"Robert Langond's Latest Adventure", "base_price"=>10.0, "sku"=>"A123"}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.4712ms
Redirected to http://localhost:3000/ecom/products/dan-brown-inferno
Completed 302 Found in 87ms


Started GET "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:03:26 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 14.3863ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/show.html.erb within layouts/ecom/application (9.2ms)
Completed 200 OK in 57ms (Views: 37.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:26 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:26 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:26 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:26 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:27 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:27 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:27 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:27 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:27 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:27 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:27 +0800


Started GET "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:03:33 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7522ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.7676ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/show.html.erb within layouts/ecom/application (1.6ms)
Completed 200 OK in 24ms (Views: 17.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:33 +0800


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 17:03:35 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.5943ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5149ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/index.html.erb within layouts/ecom/application (5.8ms)
Completed 200 OK in 23ms (Views: 22.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:03:35 +0800


Started GET "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:04:15 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6137ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.5569ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/show.html.erb within layouts/ecom/application (1.5ms)
Completed 200 OK in 30ms (Views: 24.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:15 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:16 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:16 +0800


Started GET "/ecom/products/dan-brown-inferno/edit" for 127.0.0.1 at 2014-01-12 17:04:18 +0800
Processing by Ecom::ProductsController#edit as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.8500ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/_form.html.erb (8.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/edit.html.erb within layouts/ecom/application (13.0ms)
Completed 200 OK in 34ms (Views: 30.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:18 +0800


Started PATCH "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:04:26 +0800
Processing by Ecom::ProductsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4IiQJPpgakjE6V7MlwnhNFMfe59L+SbC0AQUHlc8sbQ=", "product"=>{"name"=>"Dan Brown - Inferno", "sku"=>"A123", "description"=>"Robert Langond's Latest Adventure", "base_price"=>"10.0", "image"=>#<ActionDispatch::Http::UploadedFile:0x0000000442f578 @tempfile=#<File:/tmp/RackMultipart20140112-31082-1r8woh8>, @original_filename="au-gratin-potatoes.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"au-gratin-potatoes.jpg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Update Product", "id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7931ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.6808ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52d25a5e727775796a000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 23.1954ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52d25a5e727775796a000000')} update={"$set"=>{"image"=>"au-gratin-potatoes.jpg"}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 17.0054ms
Redirected to http://localhost:3000/ecom/products/dan-brown-inferno
Completed 302 Found in 72ms


Started GET "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:04:26 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.7876ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/show.html.erb within layouts/ecom/application (2.9ms)
Completed 200 OK in 24ms (Views: 20.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:26 +0800


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 17:04:37 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7241ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4937ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a69bd0287e86/app/views/ecom/products/index.html.erb within layouts/ecom/application (6.6ms)
Completed 200 OK in 24ms (Views: 22.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:04:37 +0800


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 17:18:21 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5193ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6476ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-40fcb19abb0e/app/views/ecom/products/index.html.erb within layouts/ecom/application (120.3ms)
Completed 500 Internal Server Error in 414ms

ActionView::Template::Error (undefined local variable or method `template' for #<#<Class:0x0000000398faf0>:0x000000039967d8>):
     6:           <p><b>Price:</b> <%= product.base_price %></p>
     7:           <p><%= product.description %></p>
     8:           <p><%=link_to 'Add To Cart', :class=> 'btn btn-success'%></p>
     9: <!--          <p><%= link_to 'View details &raquo;'.html_safe ,template, :class=>"btn btn-primary"%></p>-->
    10:         </div>
    11:     <%end%>
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-40fcb19abb0e/app/views/ecom/products/index.html.erb:9:in `block in __home_rwub__rvm_gems_ruby_______p____bundler_gems_ecom___fcb__abb_e_app_views_ecom_products_index_html_erb___2362924982913845406_29867100'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/contextual/mongo.rb:671:in `yield_document'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/contextual/mongo.rb:124:in `block (2 levels) in each'
  moped (2.0.0.beta5) lib/moped/cursor.rb:28:in `block in each'
  moped (2.0.0.beta5) lib/moped/cursor.rb:28:in `each'
  moped (2.0.0.beta5) lib/moped/cursor.rb:28:in `each'
  moped (2.0.0.beta5) lib/moped/query.rb:77:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/contextual/mongo.rb:123:in `block in each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/contextual/mongo.rb:650:in `selecting'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/contextual/mongo.rb:122:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/contextual.rb:20:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-40fcb19abb0e/app/views/ecom/products/index.html.erb:2:in `__home_rwub__rvm_gems_ruby_______p____bundler_gems_ecom___fcb__abb_e_app_views_ecom_products_index_html_erb___2362924982913845406_29867100'
  actionpack (4.0.2) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.2) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.2) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.2) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__2257671793241021624__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3371283101142789924__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (24.5ms)


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 17:21:38 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5188ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4946ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/index.html.erb within layouts/ecom/application (83.5ms)
Completed 200 OK in 527ms (Views: 421.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:39 +0800


Started GET "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:21:45 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7439ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.6418ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/show.html.erb within layouts/ecom/application (7.9ms)
Completed 200 OK in 35ms (Views: 29.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:21:45 +0800


Started GET "/ecom/products/edit" for 127.0.0.1 at 2014-01-12 17:22:20 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"edit"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8237ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["edit"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.5827ms
Completed 404 Not Found in 147ms

Mongoid::Errors::DocumentNotFound (
Problem:
  Document(s) not found for class Ecom::Product with id(s) edit.
Summary:
  When calling Ecom::Product.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): edit ... (1 total) and the following ids were not found: edit.
Resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause a nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug/criteria.rb:105:in `check_for_missing_documents_for_slugs!'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug/criteria.rb:97:in `execute_or_raise_for_slugs'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug/criteria.rb:48:in `find_by_slug!'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-slug-fb929a5d5b2a/lib/mongoid/slug/criteria.rb:31:in `find'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-8144b551ab44/lib/mongoid/findable.rb:89:in `find'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/controllers/ecom/products_controller.rb:54:in `set_product'
  activesupport (4.0.2) lib/active_support/callbacks.rb:397:in `_run__2371176155844022243__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__605069818119321315__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (31.6ms)


Started GET "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:22:25 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1778ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.1045ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/show.html.erb within layouts/ecom/application (3.3ms)
Completed 200 OK in 39ms (Views: 30.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:25 +0800


Started GET "/ecom/products/dan-brown-inferno/edit" for 127.0.0.1 at 2014-01-12 17:22:30 +0800
Processing by Ecom::ProductsController#edit as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6555ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.5756ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/_form.html.erb (118.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/edit.html.erb within layouts/ecom/application (133.7ms)
Completed 200 OK in 153ms (Views: 148.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:30 +0800


Started PATCH "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:22:45 +0800
Processing by Ecom::ProductsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4IiQJPpgakjE6V7MlwnhNFMfe59L+SbC0AQUHlc8sbQ=", "product"=>{"name"=>"Dan Brown - Inferno", "sku"=>"A123", "description"=>"Robert Langond's Latest Adventure", "base_price"=>"10.0", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000037b6c60 @tempfile=#<File:/tmp/RackMultipart20140112-2095-ee4odu>, @original_filename="Inferno-cover.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Inferno-cover.jpg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Update Product", "id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7131ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.7328ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52d25a5e727775796a000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8170ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52d25a5e727775796a000000')} update={"$set"=>{"image"=>"Inferno-cover.jpg"}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9260ms
Redirected to http://localhost:3000/ecom/products/dan-brown-inferno
Completed 302 Found in 37ms


Started GET "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:22:45 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.8740ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/show.html.erb within layouts/ecom/application (2.2ms)
Completed 200 OK in 23ms (Views: 19.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:45 +0800


Started GET "/ecom/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-12 17:22:48 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8740ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.6943ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/show.html.erb within layouts/ecom/application (1.8ms)
Completed 200 OK in 24ms (Views: 18.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:48 +0800


Started GET "/ecom/products" for 127.0.0.1 at 2014-01-12 17:22:53 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0012ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6049ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/index.html.erb within layouts/ecom/application (7.4ms)
Completed 200 OK in 29ms (Views: 27.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 17:22:53 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-12 20:27:15 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5292ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5600ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6c6b5026211f/app/views/ecom/products/index.html.erb within layouts/ecom/application (18.4ms)
Completed 200 OK in 436ms (Views: 272.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-12 20:27:16 +0800


Started GET "/" for 127.0.0.1 at 2014-01-12 20:28:05 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 45ms (Views: 42.8ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-12 20:28:06 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-12 20:28:06 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-12 20:28:06 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-12 20:28:06 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-12 20:28:06 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-12 20:28:06 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-12 20:28:06 +0800


Started GET "/store/products/new" for 127.0.0.1 at 2014-01-14 08:09:35 +0800
Processing by Ecom::ProductsController#new as HTML
Completed 500 Internal Server Error in 266ms

LoadError (Unable to autoload constant Ecom::ImageUploader, expected /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ed9e6082e731/app/uploaders/ecom/image_uploader.rb to define it):
  activesupport (4.0.2) lib/active_support/dependencies.rb:464:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  activesupport (4.0.2) lib/active_support/dependencies.rb:495:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ed9e6082e731/app/models/ecom/product.rb:13:in `<class:Product>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ed9e6082e731/app/models/ecom/product.rb:2:in `<module:Ecom>'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ed9e6082e731/app/models/ecom/product.rb:1:in `<top (required)>'
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `block in load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:616:in `new_constants_in'
  activesupport (4.0.2) lib/active_support/dependencies.rb:423:in `load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:324:in `require_or_load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:463:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  activesupport (4.0.2) lib/active_support/dependencies.rb:495:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ed9e6082e731/app/controllers/ecom/products_controller.rb:18:in `new'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:403:in `_run__3882958060071219115__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3167381102560378665__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (108.8ms)


Started GET "/store/products/new" for 127.0.0.1 at 2014-01-14 19:42:39 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-0c7668c3749b/app/views/ecom/products/_form.html.erb (852.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-0c7668c3749b/app/views/ecom/products/new.html.erb within layouts/ecom/application (928.4ms)
Completed 200 OK in 2273ms (Views: 1884.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:41 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-14 19:42:46 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.6755ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 22.1903ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-0c7668c3749b/app/views/ecom/products/index.html.erb within layouts/ecom/application (44.3ms)
Completed 200 OK in 91ms (Views: 88.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-14 19:42:46 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-14 20:35:58 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 7.0671ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 3.2268ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-236f2f2b3d50/app/views/ecom/products/index.html.erb within layouts/ecom/application (486.3ms)
Completed 200 OK in 3262ms (Views: 2605.5ms)


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:02 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:03 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-14 20:36:04 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-14 20:36:08 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 4.9268ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 3.6605ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-236f2f2b3d50/app/views/ecom/products/index.html.erb within layouts/ecom/application (41.0ms)
Completed 200 OK in 159ms (Views: 152.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:08 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:08 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-14 20:36:09 +0800


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-14 20:36:14 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (23.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (1974.5ms)
Completed 200 OK in 2458ms (Views: 2044.4ms)


Started GET "/store/users/sign_up" for 127.0.0.1 at 2014-01-14 20:36:32 +0800
Processing by Devise::RegistrationsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (6.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/registrations/new.html.erb (62.6ms)
Completed 200 OK in 153ms (Views: 133.9ms)


Started GET "/store/products" for 127.0.0.1 at 2014-01-14 21:02:40 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6490ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7940ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-de799b2bf02d/app/views/ecom/products/index.html.erb within layouts/ecom/application (131.5ms)
Completed 200 OK in 884ms (Views: 697.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-14 21:02:42 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-14 21:02:47 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
Completed 401 Unauthorized in 23ms


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-14 21:02:47 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (3.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (192.0ms)
Completed 200 OK in 213ms (Views: 202.6ms)


Started GET "/store/users/sign_up" for 127.0.0.1 at 2014-01-14 21:02:50 +0800
Processing by Devise::RegistrationsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (0.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/registrations/new.html.erb (9.0ms)
Completed 200 OK in 21ms (Views: 17.6ms)


Started POST "/store/users" for 127.0.0.1 at 2014-01-14 21:02:59 +0800
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8050ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 52.7841ms
Completed 500 Internal Server Error in 610ms

NameError (uninitialized constant Order):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:74:in `block in read_attribute_for_validation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:140:in `without_autobuild'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:74:in `read_attribute_for_validation'
  activemodel (4.0.2) lib/active_model/validator.rb:151:in `block in validate'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `each'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `validate'
  activesupport (4.0.2) lib/active_support/callbacks.rb:283:in `_callback_before_17'
  activesupport (4.0.2) lib/active_support/callbacks.rb:437:in `_run__2360011393373435241__validate__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations.rb:373:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `block in run_validations!'
  activesupport (4.0.2) lib/active_support/callbacks.rb:393:in `_run__2360011393373435241__validation__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations.rb:314:in `valid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:98:in `valid?'
  activemodel (4.0.2) lib/active_model/validations.rb:349:in `invalid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/creatable.rb:114:in `prepare_insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/creatable.rb:23:in `insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/savable.rb:23:in `save'
  devise (3.2.2) app/controllers/devise/registrations_controller.rb:15:in `create'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:423:in `_run__2677980957992338851__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/mapper.rb:44:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2005759009711271748__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (38.7ms)


Started GET "/store/" for 127.0.0.1 at 2014-01-14 21:03:56 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6888ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8030ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-de799b2bf02d/app/views/ecom/products/index.html.erb within layouts/ecom/application (11.1ms)
Completed 200 OK in 42ms (Views: 39.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-14 21:03:56 +0800


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-14 21:03:58 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7268ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.6863ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-de799b2bf02d/app/views/ecom/products/show.html.erb within layouts/ecom/application (4.7ms)
Completed 200 OK in 27ms (Views: 21.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-14 21:03:58 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-14 21:04:01 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
Completed 401 Unauthorized in 2ms


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-14 21:04:01 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (1.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (11.1ms)
Completed 200 OK in 25ms (Views: 22.8ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-14 21:04:11 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7450ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.4875ms
Completed 401 Unauthorized in 25ms
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (0.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (7.6ms)
Completed 200 OK in 598ms (Views: 15.4ms)


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-14 21:14:25 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (3.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (355.6ms)
Completed 200 OK in 573ms (Views: 446.9ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-14 21:14:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
Completed 401 Unauthorized in 2ms


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-14 21:14:29 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (1.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (21.1ms)
Completed 200 OK in 36ms (Views: 33.7ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-14 21:14:34 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5373ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7324ms
Completed 401 Unauthorized in 79ms
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (0.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (7.8ms)
Completed 200 OK in 494ms (Views: 15.8ms)


Started GET "/store/users/sign_up" for 127.0.0.1 at 2014-01-14 21:14:37 +0800
Processing by Devise::RegistrationsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (0.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/registrations/new.html.erb (8.8ms)
Completed 200 OK in 20ms (Views: 17.4ms)


Started POST "/store/users" for 127.0.0.1 at 2014-01-14 21:14:43 +0800
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8310ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 0.6264ms
Completed 500 Internal Server Error in 488ms

NameError (uninitialized constant Order):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:74:in `block in read_attribute_for_validation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:140:in `without_autobuild'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:74:in `read_attribute_for_validation'
  activemodel (4.0.2) lib/active_model/validator.rb:151:in `block in validate'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `each'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `validate'
  activesupport (4.0.2) lib/active_support/callbacks.rb:283:in `_callback_before_17'
  activesupport (4.0.2) lib/active_support/callbacks.rb:437:in `_run__3699394967707816640__validate__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations.rb:373:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `block in run_validations!'
  activesupport (4.0.2) lib/active_support/callbacks.rb:393:in `_run__3699394967707816640__validation__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations.rb:314:in `valid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:98:in `valid?'
  activemodel (4.0.2) lib/active_model/validations.rb:349:in `invalid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/creatable.rb:114:in `prepare_insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/creatable.rb:23:in `insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/savable.rb:23:in `save'
  devise (3.2.2) app/controllers/devise/registrations_controller.rb:15:in `create'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:423:in `_run__630414505166995527__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/mapper.rb:44:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__962209309802964382__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (30.8ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.0234ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6929ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 40.7426ms


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-14 21:57:15 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (3.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (366.7ms)
Completed 200 OK in 587ms (Views: 465.0ms)


Started GET "/store/users/sign_up" for 127.0.0.1 at 2014-01-14 21:57:17 +0800
Processing by Devise::RegistrationsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (1.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/registrations/new.html.erb (10.4ms)
Completed 200 OK in 22ms (Views: 19.5ms)


Started POST "/store/users" for 127.0.0.1 at 2014-01-14 21:57:24 +0800
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.8742ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 0.6476ms
Completed 500 Internal Server Error in 490ms

NameError (uninitialized constant Order):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:74:in `block in read_attribute_for_validation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:140:in `without_autobuild'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:74:in `read_attribute_for_validation'
  activemodel (4.0.2) lib/active_model/validator.rb:151:in `block in validate'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `each'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `validate'
  activesupport (4.0.2) lib/active_support/callbacks.rb:283:in `_callback_before_17'
  activesupport (4.0.2) lib/active_support/callbacks.rb:437:in `_run__3028239770851278710__validate__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations.rb:373:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `block in run_validations!'
  activesupport (4.0.2) lib/active_support/callbacks.rb:393:in `_run__3028239770851278710__validation__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations.rb:314:in `valid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:98:in `valid?'
  activemodel (4.0.2) lib/active_model/validations.rb:349:in `invalid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/creatable.rb:114:in `prepare_insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/creatable.rb:23:in `insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/savable.rb:23:in `save'
  devise (3.2.2) app/controllers/devise/registrations_controller.rb:15:in `create'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:423:in `_run__934398876087434493__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/mapper.rb:44:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3182493188281342000__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (30.9ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5760ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_orders selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2914ms


Started POST "/store/users" for 127.0.0.1 at 2014-01-14 22:41:00 +0800
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.7113ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 0.5726ms
Completed 500 Internal Server Error in 637ms

NameError (uninitialized constant Order):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:74:in `block in read_attribute_for_validation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:140:in `without_autobuild'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:74:in `read_attribute_for_validation'
  activemodel (4.0.2) lib/active_model/validator.rb:151:in `block in validate'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `each'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `validate'
  activesupport (4.0.2) lib/active_support/callbacks.rb:283:in `_callback_before_17'
  activesupport (4.0.2) lib/active_support/callbacks.rb:437:in `_run__763699946774439051__validate__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations.rb:373:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `block in run_validations!'
  activesupport (4.0.2) lib/active_support/callbacks.rb:393:in `_run__763699946774439051__validation__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations.rb:314:in `valid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/validatable.rb:98:in `valid?'
  activemodel (4.0.2) lib/active_model/validations.rb:349:in `invalid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/creatable.rb:114:in `prepare_insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/creatable.rb:23:in `insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/persistable/savable.rb:23:in `save'
  devise (3.2.2) app/controllers/devise/registrations_controller.rb:15:in `create'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:423:in `_run__1435956606367785384__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/mapper.rb:44:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:35:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__1080514797292767232__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (66.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (103.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.1768ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 0.8874ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4526ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 0.7839ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 0.8687ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_orders selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9587ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6766ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 0.9215ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.7188ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 78.9471ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 20.0177ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"email"=>"saurabh.a.bhatia@gmail.com"} flags=[] limit=-1 skip=0 batch_size=nil fields={:_id=>1} runtime: 1.0665ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_users documents=[{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000'), "email"=>"saurabh.a.bhatia@gmail.com", "encrypted_password"=>"$2a$10$w0mGY7XHGyLWaywhJfkR5eFL0d3oV5QAF08LaYdRZj93WmyW9gJ36", "sign_in_count"=>0, "updated_at"=>2014-01-15 00:09:17 UTC, "created_at"=>2014-01-15 00:09:17 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 94.7991ms


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 08:16:21 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
Completed 401 Unauthorized in 134ms


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-15 08:16:21 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (3.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (360.0ms)
Completed 200 OK in 543ms (Views: 519.2ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-15 08:16:28 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vcmd/cCl3En/E6wrR/T678aN68/NMF2VeMfNrpd7sjo=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.8469ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 44.2368ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_users selector={"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')} update={"$set"=>{"last_sign_in_at"=>2014-01-15 00:16:29 UTC, "current_sign_in_at"=>2014-01-15 00:16:29 UTC, "last_sign_in_ip"=>"127.0.0.1", "current_sign_in_ip"=>"127.0.0.1", "sign_in_count"=>1, "updated_at"=>2014-01-15 00:16:29 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.5781ms
Redirected to http://localhost:3000/store/cart/add/52d25a5e727775796a000000
Completed 302 Found in 660ms


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 08:16:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5700ms
Completed 500 Internal Server Error in 6ms

NoMethodError (undefined method `orders' for #<Ecom::User:0x00000001faab58>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6d1f3dc9fc6e/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__2738563464668254331__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__507486194917756245__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (39.9ms)


Started GET "/store" for 127.0.0.1 at 2014-01-15 08:22:05 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4220ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 44.4177ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-be7429fc8eca/app/views/ecom/products/index.html.erb within layouts/ecom/application (595.5ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8125ms
Completed 200 OK in 1251ms (Views: 1134.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 08:22:07 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 08:22:10 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8269ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5931ms
Completed 500 Internal Server Error in 27ms

NoMethodError (undefined method `purcahses' for #<Ecom::User:0x000000029df920>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-be7429fc8eca/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__200402161011141629__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__735255136037687960__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (30.2ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 08:27:16 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.8340ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0185ms
Completed 500 Internal Server Error in 205ms

NoMethodError (undefined method `purcahses' for #<Ecom::User:0x000000037c3780>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-f381529af30b/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1584817935873806839__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__237435915442041698__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (178.8ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 08:27:24 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0487ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2380ms
Completed 500 Internal Server Error in 9ms

NoMethodError (undefined method `purcahses' for #<Ecom::User:0x000000039a7e20>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-f381529af30b/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1584817935873806839__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__237435915442041698__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.5ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 08:33:18 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8016ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5560ms
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `purcahses' for #<Ecom::User:0x00000003ac00f0>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-f381529af30b/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1584817935873806839__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__237435915442041698__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (32.9ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 08:33:21 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0353ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6063ms
Completed 500 Internal Server Error in 6ms

NoMethodError (undefined method `purcahses' for #<Ecom::User:0x000000055907b8>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-f381529af30b/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1584817935873806839__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__237435915442041698__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (34.6ms)


Started GET "/" for 127.0.0.1 at 2014-01-15 19:38:04 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (80.3ms)
Completed 200 OK in 432ms (Views: 397.1ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:04 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:04 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:04 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:04 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:05 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:05 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:05 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-15 19:38:11 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2611ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 18.7870ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-044ef96f2d0c/app/views/ecom/products/index.html.erb within layouts/ecom/application (84.5ms)
Completed 200 OK in 602ms (Views: 490.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:11 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:11 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:11 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:11 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:11 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:11 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:12 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:12 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:12 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:12 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:12 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:12 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:12 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 19:38:12 +0800


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-15 19:38:14 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (4.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (980.5ms)
Completed 200 OK in 1029ms (Views: 1006.4ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-15 19:38:23 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"EegCYC5oQQAb54iOzaGvJpFsXLTY/wz4H0aECHjHqeI=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8214ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 65.3844ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_users selector={"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')} update={"$set"=>{"current_sign_in_at"=>2014-01-15 11:38:23 UTC, "sign_in_count"=>2, "updated_at"=>2014-01-15 11:38:23 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.3634ms
Redirected to http://localhost:3000/
Completed 302 Found in 687ms


Started GET "/" for 127.0.0.1 at 2014-01-15 19:38:24 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 11ms (Views: 10.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:24 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:24 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:24 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:24 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:24 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:24 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:24 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-15 19:38:27 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6690ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4526ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-044ef96f2d0c/app/views/ecom/products/index.html.erb within layouts/ecom/application (5.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7283ms
Completed 200 OK in 26ms (Views: 25.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 19:38:27 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:28 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:28 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 19:38:28 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 19:38:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7375ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7296ms
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `purcahses' for #<Ecom::User:0x00000004e6a8f8>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-044ef96f2d0c/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1055100085533773234__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__1413485065585557__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.8ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 19:49:34 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2705ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6215ms
Completed 500 Internal Server Error in 121ms

NoMethodError (undefined method `purcahses' for #<Ecom::User:0x00000002c69b78>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-27a1bed76ce8/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__2884583075726058505__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__977744245405276101__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (99.7ms)


Started GET "/store/products" for 127.0.0.1 at 2014-01-15 19:49:40 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7645ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0121ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-27a1bed76ce8/app/views/ecom/products/index.html.erb within layouts/ecom/application (17.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8634ms
Completed 200 OK in 366ms (Views: 288.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 19:49:41 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 19:49:42 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7898ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7242ms
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `purcahses' for #<Ecom::User:0x00000004d72f68>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-27a1bed76ce8/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__2884583075726058505__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__977744245405276101__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (34.3ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 19:57:46 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2803ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6427ms
Completed 500 Internal Server Error in 125ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-7c08b01ec0eb/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__4214612316058531735__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__171613128491002590__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (38.4ms)


Started GET "/store/products" for 127.0.0.1 at 2014-01-15 20:11:47 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2568ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5266ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-2a7f5b847aa0/app/views/ecom/products/index.html.erb within layouts/ecom/application (87.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8500ms
Completed 200 OK in 543ms (Views: 433.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 20:11:48 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 20:11:51 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9687ms
Completed 500 Internal Server Error in 24ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-2a7f5b847aa0/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__3833231812779559378__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2911213948445231891__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (32.5ms)


Started GET "/store/products" for 127.0.0.1 at 2014-01-15 20:16:14 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1794ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5304ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-957b59525daa/app/views/ecom/products/index.html.erb within layouts/ecom/application (23.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0311ms
Completed 200 OK in 607ms (Views: 437.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 20:16:15 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 20:16:16 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8124ms
Completed 500 Internal Server Error in 24ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-957b59525daa/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1901328715512438069__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2017802901264897884__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (33.8ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 20:24:17 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6317ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8104ms
Completed 500 Internal Server Error in 123ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-957b59525daa/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__425436641129196762__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4546656155744929811__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (97.2ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-15 20:24:25 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8169ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.8350ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9439ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-957b59525daa/app/views/ecom/products/show.html.erb within layouts/ecom/application (12.5ms)
Completed 200 OK in 267ms (Views: 189.8ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 20:24:26 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 20:24:28 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0384ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8257ms
Completed 500 Internal Server Error in 8ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-957b59525daa/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__425436641129196762__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4546656155744929811__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (29.5ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-15 21:00:35 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3695ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.7260ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9254ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-5be989183959/app/views/ecom/products/show.html.erb within layouts/ecom/application (84.2ms)
Completed 200 OK in 549ms (Views: 438.8ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 21:00:36 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 21:00:37 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.9093ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8591ms
Completed 500 Internal Server Error in 31ms

NoMethodError (undefined method `Purchase' for #<Ecom::User:0x000000049a58e0>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-5be989183959/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1946049277970492885__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3456206996471084094__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (32.2ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 21:20:33 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 3.4280ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6584ms
Completed 500 Internal Server Error in 138ms

NoMethodError (undefined method `Purchase' for #<Ecom::User:0x00000003102518>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-8a3bd2fb141a/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__336128968094812527__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2807059717687716639__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (102.3ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-15 21:20:39 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7686ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.6822ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 2.0233ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-8a3bd2fb141a/app/views/ecom/products/show.html.erb within layouts/ecom/application (16.5ms)
Completed 200 OK in 415ms (Views: 323.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 21:20:39 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 21:20:40 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.9781ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8556ms
Completed 500 Internal Server Error in 8ms

NoMethodError (undefined method `Purchase' for #<Ecom::User:0x000000050987b0>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-8a3bd2fb141a/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__336128968094812527__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2807059717687716639__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (31.6ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-15 21:24:17 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5489ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.6497ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6989ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9bd39e4df3f9/app/views/ecom/products/show.html.erb within layouts/ecom/application (33.4ms)
Completed 200 OK in 638ms (Views: 464.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 21:24:18 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 21:24:19 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 21:24:19 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 21:24:19 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 21:24:20 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.9828ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9365ms
Completed 500 Internal Server Error in 40ms

NoMethodError (undefined method `Purchase' for #<Ecom::User:0x00000004d8fc80>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9bd39e4df3f9/app/controllers/ecom/cart_controller.rb:34:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__2663226088450724277__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4420724721366481633__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (53.1ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-15 22:44:34 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4092ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.7388ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8593ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-38049235df2f/app/views/ecom/products/show.html.erb within layouts/ecom/application (88.4ms)
Completed 200 OK in 575ms (Views: 451.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-15 22:44:35 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 22:44:36 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.9989ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8491ms
Completed 500 Internal Server Error in 29ms

NoMethodError (undefined method `Purchase' for #<Ecom::User:0x000000048b9cb0>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-38049235df2f/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__356924300147367322__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3690970157448322815__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.9ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 22:48:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3968ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6048ms
Completed 500 Internal Server Error in 126ms

NoMethodError (undefined method `Ecom' for #<Ecom::User:0x000000026becc8>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-8fadb0b9d371/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__3193120899016267913__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2955337592410046497__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (103.9ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 22:48:38 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7319ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6209ms
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `Ecom' for #<Ecom::User:0x00000002793cc0>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-8fadb0b9d371/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__3193120899016267913__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2955337592410046497__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (32.4ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-15 22:54:52 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5128ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0535ms
Completed 500 Internal Server Error in 127ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a45ce161cbc1/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__2308942791951990086__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4566356533044780323__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (37.0ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 07:02:15 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3772ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 25.9357ms
Completed 500 Internal Server Error in 215ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-4f46172adc10/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-a45ce161cbc1/app/controllers/ecom/cart_controller.rb:36:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__3524278514826649909__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4272961780033924959__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (121.8ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-16 07:07:06 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 65.8773ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 30.2539ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2030ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-823930d147c3/app/views/ecom/products/show.html.erb within layouts/ecom/application (128.7ms)
Completed 200 OK in 821ms (Views: 608.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-16 07:07:07 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-16 07:07:08 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 07:07:09 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7928ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7878ms
Completed 500 Internal Server Error in 33ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-823930d147c3/app/controllers/ecom/cart_controller.rb:39:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1635189290139404033__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__1666905137364746866__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (36.3ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.0766ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 2.2700ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9470ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.0548ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 26.0129ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9336ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7144ms


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-16 21:54:23 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1883ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 12.4187ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 13.4710ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-823930d147c3/app/views/ecom/products/show.html.erb within layouts/ecom/application (98.9ms)
Completed 200 OK in 723ms (Views: 524.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-16 21:54:24 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 21:54:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1681ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8782ms
Completed 500 Internal Server Error in 94ms

NameError (uninitialized constant Purchase):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-823930d147c3/app/controllers/ecom/cart_controller.rb:39:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__2324670351748546139__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3895518722537697725__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (39.0ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 21:57:38 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2878ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7196ms
Completed 500 Internal Server Error in 128ms

NameError (uninitialized constant Purchases):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-823930d147c3/app/controllers/ecom/cart_controller.rb:39:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__2790560849448907162__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4421801444311607271__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (104.1ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 22:02:30 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5823ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8773ms
Completed 500 Internal Server Error in 179ms

NameError (uninitialized constant Purchases):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-6041b4408b80/app/controllers/ecom/cart_controller.rb:39:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__3143917527730773755__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__25974957192653912__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (59.9ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8936ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1995ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5252ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 2.0657ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3563ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5934ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.8942ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6707ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7734ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7249ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6702ms


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 22:27:37 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2556ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5763ms
Completed 500 Internal Server Error in 124ms

NameError (uninitialized constant Purchases):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-0bcffc4da738/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-5ef17d509e1c/app/controllers/ecom/cart_controller.rb:39:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__4168604130638490632__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__562603825178241967__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (38.2ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-16 22:37:47 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6868ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.0241ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9191ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-111373ac03da/app/views/ecom/products/show.html.erb within layouts/ecom/application (22.9ms)
Completed 200 OK in 636ms (Views: 459.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-16 22:37:48 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 22:37:49 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7167ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6507ms
Completed 500 Internal Server Error in 98ms

NameError (uninitialized constant Purchases):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-2304e622daa1/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-111373ac03da/app/controllers/ecom/cart_controller.rb:39:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__3931569787427391864__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2398646930685218848__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (70.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (101.0ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-16 23:02:24 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6454ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.7410ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8823ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-1de1b586f3d9/app/views/ecom/products/show.html.erb within layouts/ecom/application (18.3ms)
Completed 200 OK in 631ms (Views: 447.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-16 23:02:24 +0800


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-16 23:02:31 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7473ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.6441ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7678ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-1de1b586f3d9/app/views/ecom/products/show.html.erb within layouts/ecom/application (10.4ms)
Completed 200 OK in 42ms (Views: 35.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-16 23:02:31 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 23:02:38 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7551ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5749ms
Completed 500 Internal Server Error in 205ms

NameError (uninitialized constant LineItem):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/validatable.rb:74:in `block in read_attribute_for_validation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:140:in `without_autobuild'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/validatable.rb:74:in `read_attribute_for_validation'
  activemodel (4.0.2) lib/active_model/validator.rb:151:in `block in validate'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `each'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `validate'
  activesupport (4.0.2) lib/active_support/callbacks.rb:283:in `_callback_before_22'
  activesupport (4.0.2) lib/active_support/callbacks.rb:377:in `_run__3838383380321284958__validate__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations.rb:373:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `block in run_validations!'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3838383380321284958__validation__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations.rb:314:in `valid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/validatable.rb:98:in `valid?'
  activemodel (4.0.2) lib/active_model/validations.rb:349:in `invalid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/creatable.rb:114:in `prepare_insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/creatable.rb:23:in `insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/savable.rb:23:in `save'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/creatable.rb:148:in `block in create'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/threaded/lifecycle.rb:156:in `_creating'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/creatable.rb:143:in `create'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-1de1b586f3d9/app/controllers/ecom/cart_controller.rb:39:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__699516418244612110__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4150633360118652200__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (35.6ms)


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 23:14:39 +0800

SyntaxError (/home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-104261b38813/app/controllers/ecom/cart_controller.rb:39: syntax error, unexpected '.'
     cart = .create
             ^):
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `block in load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:616:in `new_constants_in'
  activesupport (4.0.2) lib/active_support/dependencies.rb:423:in `load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:324:in `require_or_load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:463:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:228:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:228:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/dependencies.rb:535:in `get'
  activesupport (4.0.2) lib/active_support/dependencies.rb:566:in `constantize'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3406483592081686954__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (98.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (135.2ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-16 23:22:27 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2642ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.5839ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8910ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ae85d8bacd25/app/views/ecom/products/show.html.erb within layouts/ecom/application (19.7ms)
Completed 200 OK in 554ms (Views: 362.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-16 23:22:28 +0800


Started GET "/store/cart/add/52d25a5e727775796a000000" for 127.0.0.1 at 2014-01-16 23:22:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52d25a5e727775796a000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8455ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6504ms
Completed 500 Internal Server Error in 174ms

NameError (uninitialized constant LineItem):
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:226:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/core_ext/string/inflections.rb:66:in `constantize'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/metadata.rb:575:in `klass'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/referenced/many.rb:563:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/metadata.rb:181:in `criteria'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/builders/referenced/many.rb:20:in `build'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:43:in `create_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:26:in `__build__'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:104:in `block (2 levels) in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/threaded/lifecycle.rb:125:in `_loading'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:100:in `block in get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/threaded/lifecycle.rb:84:in `_building'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:99:in `get_relation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:187:in `block in getter'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/validatable.rb:74:in `block in read_attribute_for_validation'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/relations/accessors.rb:140:in `without_autobuild'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/validatable.rb:74:in `read_attribute_for_validation'
  activemodel (4.0.2) lib/active_model/validator.rb:151:in `block in validate'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `each'
  activemodel (4.0.2) lib/active_model/validator.rb:150:in `validate'
  activesupport (4.0.2) lib/active_support/callbacks.rb:283:in `_callback_before_22'
  activesupport (4.0.2) lib/active_support/callbacks.rb:377:in `_run__1705329867122348537__validate__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations.rb:373:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `block in run_validations!'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__1705329867122348537__validation__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/interceptable.rb:132:in `run_callbacks'
  activemodel (4.0.2) lib/active_model/validations/callbacks.rb:106:in `run_validations!'
  activemodel (4.0.2) lib/active_model/validations.rb:314:in `valid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/validatable.rb:98:in `valid?'
  activemodel (4.0.2) lib/active_model/validations.rb:349:in `invalid?'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/creatable.rb:114:in `prepare_insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/creatable.rb:23:in `insert'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/savable.rb:23:in `save'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/creatable.rb:148:in `block in create'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/threaded/lifecycle.rb:156:in `_creating'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-56862bd5a6f0/lib/mongoid/persistable/creatable.rb:143:in `create'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ae85d8bacd25/app/controllers/ecom/cart_controller.rb:39:in `get_cart_value'
  activesupport (4.0.2) lib/active_support/callbacks.rb:407:in `_run__1080677071424328568__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__1496761958267939452__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (34.6ms)


Started GET "/store" for 127.0.0.1 at 2014-01-17 08:37:42 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 32.1028ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 47.1850ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ae85d8bacd25/app/views/ecom/products/index.html.erb within layouts/ecom/application (144.3ms)
Completed 200 OK in 588ms (Views: 416.5ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-17 08:37:43 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-17 08:37:46 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7735ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4795ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ae85d8bacd25/app/views/ecom/products/index.html.erb within layouts/ecom/application (7.1ms)
Completed 200 OK in 28ms (Views: 26.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:46 +0800


Started GET "/" for 127.0.0.1 at 2014-01-17 08:37:47 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 104ms (Views: 101.4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:47 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-17 08:37:47 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:47 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:47 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:48 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:48 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-17 08:37:48 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3594ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 38.6449ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0781ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52d25a5e727775796a000000')} flags=[:remove_first]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 18.3480ms


Started GET "/store/products" for 127.0.0.1 at 2014-01-17 08:38:14 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6907ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.3568ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ae85d8bacd25/app/views/ecom/products/index.html.erb within layouts/ecom/application (3.1ms)
Completed 200 OK in 23ms (Views: 21.6ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:14 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-17 08:38:47 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7803ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4313ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-ae85d8bacd25/app/views/ecom/products/index.html.erb within layouts/ecom/application (2.9ms)
Completed 200 OK in 26ms (Views: 25.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-17 08:38:47 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 31.7709ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 127.1599ms


Started GET "/store" for 127.0.0.1 at 2014-01-21 08:19:57 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5273ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 14.8168ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9f4e40404a0d/app/views/ecom/products/index.html.erb within layouts/ecom/application (95.1ms)
Completed 200 OK in 597ms (Views: 556.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 08:19:58 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-21 08:20:00 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5015ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9f4e40404a0d/app/views/ecom/products/index.html.erb within layouts/ecom/application (1.6ms)
Completed 200 OK in 95ms (Views: 93.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:00 +0800


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-21 08:20:02 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (4.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (562.8ms)
Completed 200 OK in 602ms (Views: 585.8ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-21 08:20:11 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9YJ99zzttmF12kgEz64Itl2T4lUY7ylvJy9OgAq3cbY=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.9766ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 62.7303ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_users selector={"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')} update={"$set"=>{"last_sign_in_at"=>2014-01-15 11:38:23 UTC, "current_sign_in_at"=>2014-01-21 00:20:12 UTC, "sign_in_count"=>3, "updated_at"=>2014-01-21 00:20:12 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0849ms
Redirected to http://localhost:3000/
Completed 302 Found in 1105ms


Started GET "/" for 127.0.0.1 at 2014-01-21 08:20:12 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 162ms (Views: 159.7ms)


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:13 +0800


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:13 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:13 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:13 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:13 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:13 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:13 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-21 08:20:16 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1620ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1555ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9f4e40404a0d/app/views/ecom/products/index.html.erb within layouts/ecom/application (6.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1963ms
Completed 200 OK in 39ms (Views: 37.1ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:16 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-21 08:20:17 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6190ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.3543ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9f4e40404a0d/app/views/ecom/products/index.html.erb within layouts/ecom/application (3.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7369ms
Completed 200 OK in 26ms (Views: 24.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:18 +0800


Started GET "/store/products/new" for 127.0.0.1 at 2014-01-21 08:20:20 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9f4e40404a0d/app/views/ecom/products/_form.html.erb (49.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9f4e40404a0d/app/views/ecom/products/new.html.erb within layouts/ecom/application (53.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7473ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0206ms
Completed 200 OK in 158ms (Views: 156.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:20 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:20 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:20 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:20 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:20 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:20 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:20 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:21 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:21 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:21 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:21 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:21 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:21 +0800


Started POST "/store/products" for 127.0.0.1 at 2014-01-21 08:20:41 +0800
Processing by Ecom::ProductsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"opWubNWXJaH+g7T7xWUrNbksjU9rhbA3fg5t7KUZ1jQ=", "product"=>{"name"=>"Dan Brown - Inferno", "sku"=>"A123", "description"=>"Robert Langond's Latest Adventure", "base_price"=>"10", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000036cf338 @tempfile=#<File:/tmp/RackMultipart20140121-5332-15ukhy>, @original_filename="danbrown.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"danbrown.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Create Product"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8242ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$all"=>[/^dan\-brown\-inferno(?:-(\d+))?$/]}, "_id"=>{"$ne"=>BSON::ObjectId('52ddbd5972777514d4000000')}} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7809ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_products documents=[{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "_slugs"=>["dan-brown-inferno"], "name"=>"Dan Brown - Inferno", "description"=>"Robert Langond's Latest Adventure", "base_price"=>10.0, "sku"=>"A123", "image"=>"danbrown.jpeg"}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.2135ms
Redirected to http://localhost:3000/store/products/dan-brown-inferno
Completed 302 Found in 220ms


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-21 08:20:41 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.0014ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7781ms
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9f4e40404a0d/app/views/ecom/products/show.html.erb within layouts/ecom/application (17.4ms)
Completed 200 OK in 43ms (Views: 37.1ms)


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-21 08:20:41 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 08:20:45 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8311ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6513ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52ddbd5d72777514d4010000'), "updated_at"=>2014-01-21 00:20:45 UTC, "created_at"=>2014-01-21 00:20:45 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 22.4358ms
Completed 500 Internal Server Error in 35ms

NoMethodError (undefined method `new_record?' for nil:NilClass):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/ecom-9f4e40404a0d/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__1323079889447417270__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__263670521426593636__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (33.9ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-01-21 08:35:43 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.7139ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.6699ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8525ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (86.9ms)
Completed 200 OK in 475ms (Views: 437.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 08:35:43 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-21 08:35:44 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 08:35:46 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8106ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52ddc0e27277751c06000000'), "updated_at"=>2014-01-21 00:35:46 UTC, "created_at"=>2014-01-21 00:35:46 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0675ms
Completed 500 Internal Server Error in 37ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__2479582366273107539__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__4583449644135838822__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (31.5ms)


Started GET "/" for 127.0.0.1 at 2014-01-21 22:27:47 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (27.7ms)
Completed 200 OK in 820ms (Views: 714.8ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-21 22:27:49 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-21 22:27:49 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:49 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:49 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:49 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:49 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:49 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-21 22:27:54 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 3.1504ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 23.0673ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (91.7ms)
Completed 200 OK in 674ms (Views: 668.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-21 22:27:55 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 22:28:01 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
Completed 401 Unauthorized in 203ms


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-21 22:28:01 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (8.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (349.3ms)
Completed 200 OK in 560ms (Views: 387.4ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-21 22:28:11 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cZVpiWw4uWqq3Y/KUAuBW7o3XGzd+Xx/1qhDmi8An2E=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5209ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 26.5483ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_users selector={"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')} update={"$set"=>{"last_sign_in_at"=>2014-01-21 00:20:12 UTC, "current_sign_in_at"=>2014-01-21 14:28:12 UTC, "sign_in_count"=>4, "updated_at"=>2014-01-21 14:28:12 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 2.1657ms
Redirected to http://localhost:3000/store/cart/add/52ddbd5972777514d4000000
Completed 302 Found in 1536ms


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 22:28:12 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 2.6266ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52de83fc7277750e9e000000'), "updated_at"=>2014-01-21 14:28:12 UTC, "created_at"=>2014-01-21 14:28:12 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 28.9018ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5205ms
Completed 500 Internal Server Error in 60ms

NoMethodError (undefined method `price' for #<Ecom::Product:0x000000031dd258>):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:13:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__623657463543714273__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__574846037082922818__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (82.8ms)


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-21 22:35:34 +0800
Processing by Devise::SessionsController#new as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3694ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5716ms
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 16ms


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-21 22:35:35 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-21 22:35:35 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:35 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:35 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:35 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:35 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:35 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-21 22:35:42 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4780ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2028ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (15.7ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4756ms
Completed 200 OK in 72ms (Views: 68.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-21 22:35:42 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 22:35:44 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.9184ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52de85c07277750e9e010000'), "updated_at"=>2014-01-21 14:35:44 UTC, "created_at"=>2014-01-21 14:35:44 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.5762ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3366ms
@@@@@@@@@@@@@@@@#<Ecom::Product _id: 52ddbd5972777514d4000000, name: "Dan Brown - Inferno", description: "Robert Langond's Latest Adventure", base_price: 10.0, sku: "A123", _slugs: ["dan-brown-inferno"], category_id: nil, image: "danbrown.jpeg">
Completed 500 Internal Server Error in 27ms

NoMethodError (undefined method `price' for #<Ecom::Product:0x000000050bc0c0>):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:14:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__623657463543714273__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__574846037082922818__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (89.0ms)


Started GET "/store" for 127.0.0.1 at 2014-01-21 22:43:34 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3942ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0849ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (14.2ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6421ms
Completed 200 OK in 68ms (Views: 63.8ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 22:43:35 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-21 22:48:41 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.5297ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1393ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (182.3ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6874ms
Completed 200 OK in 721ms (Views: 630.6ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-21 22:48:42 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 22:48:45 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6691ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4908ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52de88cd72777510b5000000'), "updated_at"=>2014-01-21 14:48:45 UTC, "created_at"=>2014-01-21 14:48:45 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 2.0431ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5296ms
@@@@@@@@@@@@@@@@#<Ecom::Product _id: 52ddbd5972777514d4000000, name: "Dan Brown - Inferno", description: "Robert Langond's Latest Adventure", base_price: 10.0, sku: "A123", _slugs: ["dan-brown-inferno"], category_id: nil, image: "danbrown.jpeg">
Completed 500 Internal Server Error in 258ms

NoMethodError (undefined method `save' for 10.0:Float):
  app/models/ecom/line_item.rb:18:in `make_items'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (81.3ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 23:01:01 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6153ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6156ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52de8bae72777510b5010000'), "updated_at"=>2014-01-21 15:01:02 UTC, "created_at"=>2014-01-21 15:01:02 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7180ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.4192ms
@@@@@@@@@@@@@@@@#<Ecom::Product _id: 52ddbd5972777514d4000000, name: "Dan Brown - Inferno", description: "Robert Langond's Latest Adventure", base_price: 10.0, sku: "A123", _slugs: ["dan-brown-inferno"], category_id: nil, image: "danbrown.jpeg">
Completed 500 Internal Server Error in 71ms

NoMethodError (undefined method `save' for 10.0:Float):
  app/models/ecom/line_item.rb:18:in `make_items'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (73.9ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 23:09:40 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.6104ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.7399ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52de8db472777513c8000000'), "updated_at"=>2014-01-21 15:09:40 UTC, "created_at"=>2014-01-21 15:09:40 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.9409ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5772ms
@@@@@@@@@@@@@@@@#<Ecom::Product _id: 52ddbd5972777514d4000000, name: "Dan Brown - Inferno", description: "Robert Langond's Latest Adventure", base_price: 10.0, sku: "A123", _slugs: ["dan-brown-inferno"], category_id: nil, image: "danbrown.jpeg">
Completed 500 Internal Server Error in 322ms

NoMethodError (undefined method `save' for 10.0:Float):
  app/models/ecom/line_item.rb:18:in `make_items'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (93.1ms)


Started GET "/store" for 127.0.0.1 at 2014-01-21 23:10:07 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6160ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.4034ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (33.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.7524ms
Completed 200 OK in 332ms (Views: 327.6ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 23:10:08 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 23:10:08 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 23:10:08 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 23:10:08 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 23:10:08 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-21 23:10:09 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 23:10:10 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5381ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3392ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52de8dd272777513c8010000'), "updated_at"=>2014-01-21 15:10:10 UTC, "created_at"=>2014-01-21 15:10:10 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.5191ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2326ms
@@@@@@@@@@@@@@@@#<Ecom::Product _id: 52ddbd5972777514d4000000, name: "Dan Brown - Inferno", description: "Robert Langond's Latest Adventure", base_price: 10.0, sku: "A123", _slugs: ["dan-brown-inferno"], category_id: nil, image: "danbrown.jpeg">
Completed 500 Internal Server Error in 71ms

NoMethodError (undefined method `save' for 10.0:Float):
  app/models/ecom/line_item.rb:18:in `make_items'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (90.1ms)


Started GET "/store" for 127.0.0.1 at 2014-01-21 23:26:25 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5002ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 47.7673ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (408.2ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 54.0677ms
Completed 200 OK in 1665ms (Views: 1610.8ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-21 23:26:27 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-21 23:26:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2773ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9044ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52de91a57277750d0f000000'), "updated_at"=>2014-01-21 15:26:29 UTC, "created_at"=>2014-01-21 15:26:29 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.1474ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7351ms
@@@@@@@@@@@@@@@@#<Ecom::Product _id: 52ddbd5972777514d4000000, name: "Dan Brown - Inferno", description: "Robert Langond's Latest Adventure", base_price: 10.0, sku: "A123", _slugs: ["dan-brown-inferno"], category_id: nil, image: "danbrown.jpeg">
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52de91a57277750d0f010000'), "purchase_id"=>BSON::ObjectId('52de91a57277750d0f000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-21 15:26:29 UTC, "created_at"=>2014-01-21 15:26:29 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 86.7877ms
Completed 500 Internal Server Error in 342ms

NoMethodError (undefined method `recalculate_price!' for #<Ecom::Purchase:0x0000000589c600>):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:15:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__73990411350000781__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__1319225003745329726__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (88.7ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 06:37:34 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.7616ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 18.6200ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52def6af7277750d6d000000'), "updated_at"=>2014-01-21 22:37:35 UTC, "created_at"=>2014-01-21 22:37:35 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 33.1020ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 15.8313ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52def6af7277750d6d010000'), "purchase_id"=>BSON::ObjectId('52def6af7277750d6d000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-21 22:37:35 UTC, "created_at"=>2014-01-21 22:37:35 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 13.3070ms
Completed 500 Internal Server Error in 481ms

NoMethodError (undefined method `recalculate_price!' for #<Ecom::Purchase:0x0000000382c078>):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:14:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__4121577721073870299__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2942519218402630052__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (110.6ms)


Started GET "/store" for 127.0.0.1 at 2014-01-22 06:37:55 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4929ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0418ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (87.8ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6946ms
Completed 200 OK in 645ms (Views: 640.8ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 06:37:57 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 06:38:05 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5864ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.8715ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52def6cd7277750d6d020000'), "updated_at"=>2014-01-21 22:38:05 UTC, "created_at"=>2014-01-21 22:38:05 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7846ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3278ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52def6cd7277750d6d030000'), "purchase_id"=>BSON::ObjectId('52def6cd7277750d6d020000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-21 22:38:05 UTC, "created_at"=>2014-01-21 22:38:05 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.6986ms
Completed 500 Internal Server Error in 99ms

NoMethodError (undefined method `recalculate_price!' for #<Ecom::Purchase:0x0000000594a700>):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:14:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__4121577721073870299__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2942519218402630052__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (89.0ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:06:13 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.6585ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3512ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52defd657277751422000000'), "updated_at"=>2014-01-21 23:06:13 UTC, "created_at"=>2014-01-21 23:06:13 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.8677ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3610ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52defd657277751422010000'), "purchase_id"=>BSON::ObjectId('52defd657277751422000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-21 23:06:13 UTC, "created_at"=>2014-01-21 23:06:13 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7349ms
Completed 500 Internal Server Error in 322ms

NoMethodError (undefined method `recalculate_price!' for #<Mongoid::Criteria:0x00000003b21b48>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/criteria.rb:523:in `method_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/referenced/many.rb:413:in `public_send'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/referenced/many.rb:413:in `block in method_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/scopable.rb:238:in `with_scope'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/referenced/many.rb:412:in `method_missing'
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:14:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__2891393403495473366__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2811971994575959794__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (225.6ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:10:48 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.9575ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2712ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52defe7872777515ac000000'), "updated_at"=>2014-01-21 23:10:48 UTC, "created_at"=>2014-01-21 23:10:48 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7978ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.4201ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52defe7872777515ac010000'), "purchase_id"=>BSON::ObjectId('52defe7872777515ac000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-21 23:10:48 UTC, "created_at"=>2014-01-21 23:10:48 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7453ms
Completed 500 Internal Server Error in 331ms

NoMethodError (undefined method `recalculate_price!' for #<Mongoid::Criteria:0x000000023c5d50>):
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/criteria.rb:523:in `method_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/referenced/many.rb:413:in `public_send'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/referenced/many.rb:413:in `block in method_missing'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/scopable.rb:238:in `with_scope'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/referenced/many.rb:412:in `method_missing'
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:14:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3973751928613682188__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__279109709348179533__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (105.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.7599ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2859ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.6079ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2116ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52df00a67277751695020000'), "purchase_id"=>BSON::ObjectId('52df00767277751695000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-21 23:20:06 UTC, "created_at"=>2014-01-21 23:20:06 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 2.2095ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df00767277751695000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.4831ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52df00767277751695000000'), "total_price"=>10.0, "updated_at"=>2014-01-21 23:20:19 UTC, "created_at"=>2014-01-21 23:20:19 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 2.1424ms


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:20:35 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4533ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.7311ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52df00c372777515ac020000'), "updated_at"=>2014-01-21 23:20:35 UTC, "created_at"=>2014-01-21 23:20:35 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.6283ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3194ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52df00c372777515ac030000'), "purchase_id"=>BSON::ObjectId('52df00c372777515ac020000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-21 23:20:35 UTC, "created_at"=>2014-01-21 23:20:35 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.6836ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df00c372777515ac020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.6857ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df00c372777515ac020000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-01-21 23:20:35 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.8378ms
Redirected to http://localhost:3000/cart
Completed 302 Found in 83ms


Started GET "/cart" for 127.0.0.1 at 2014-01-22 07:20:35 +0800

ActionController::RoutingError (No route matches [GET] "/cart"):
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (11.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (212.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (429.3ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:20:43 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4333ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5089ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df00c372777515ac020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1818ms
Completed 500 Internal Server Error in 16ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3973751928613682188__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__279109709348179533__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (74.2ms)


Started GET "/store" for 127.0.0.1 at 2014-01-22 07:21:33 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4287ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0880ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (30.5ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.8693ms
Completed 200 OK in 318ms (Views: 313.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:21:34 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:21:35 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:21:35 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:21:35 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:21:35 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:21:35 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:21:36 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5003ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3637ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df00c372777515ac020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2246ms
Completed 500 Internal Server Error in 222ms

NoMethodError (undefined method `id' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:10:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3973751928613682188__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__279109709348179533__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (79.8ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:21:55 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3803ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3888ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df00c372777515ac020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2929ms
Completed 500 Internal Server Error in 56ms

NoMethodError (undefined method `id' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:10:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3973751928613682188__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__279109709348179533__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (81.3ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=project10_development command={:count=>"ecom_purchases", :query=>{}} runtime: 1.1587ms
  MOPED: 127.0.0.1:27017 COMMAND      database=project10_development command={:count=>"ecom_purchases", :query=>{}} runtime: 1.2239ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_purchases selector={} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7780ms


Started GET "/store/users/sign_out" for 127.0.0.1 at 2014-01-22 07:24:17 +0800

ActionController::RoutingError (No route matches [GET] "/store/users/sign_out"):
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (5.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (12.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (176.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (383.7ms)


Started GET "/" for 127.0.0.1 at 2014-01-22 07:24:21 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 433ms (Views: 338.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:24:22 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:22 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:22 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:22 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 07:24:22 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:22 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:22 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 07:24:27 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 3.1463ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 4.3564ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (56.7ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.9828ms
Completed 200 OK in 354ms (Views: 349.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:24:27 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:24:28 +0800


Started DELETE "/store/users/sign_out" for 127.0.0.1 at 2014-01-22 07:25:03 +0800
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ttqvHNnq9u7cV9YFm7RC+74tO5tctLb2UC1Ye9srYi0="}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5561ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4339ms
Redirected to http://localhost:3000/
Completed 302 Found in 440ms


Started GET "/" for 127.0.0.1 at 2014-01-22 07:25:04 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 25ms (Views: 23.0ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:04 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:04 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:04 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:04 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:04 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:04 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:04 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 07:25:09 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4227ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9361ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (13.8ms)
Completed 200 OK in 229ms (Views: 226.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:25:09 +0800


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-22 07:25:16 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (8.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (272.4ms)
Completed 200 OK in 342ms (Views: 308.7ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-22 07:25:25 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"T0RlTqYRp0cTgctLxjylRY216d/LG/bD0E4+8P94Axg=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4724ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.9222ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_users selector={"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')} update={"$set"=>{"last_sign_in_at"=>2014-01-21 14:28:12 UTC, "current_sign_in_at"=>2014-01-21 23:25:27 UTC, "sign_in_count"=>5, "updated_at"=>2014-01-21 23:25:27 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 2.0559ms
Redirected to http://localhost:3000/
Completed 302 Found in 1481ms


Started GET "/" for 127.0.0.1 at 2014-01-22 07:25:27 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 26ms (Views: 23.6ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:27 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:27 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:27 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:27 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:27 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:27 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:27 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 07:25:30 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3824ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2105ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (14.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4196ms
Completed 200 OK in 64ms (Views: 61.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:25:30 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:25:31 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:31 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:31 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:25:31 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:25:32 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 2.0211ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52df01ec727775176f000000'), "updated_at"=>2014-01-21 23:25:32 UTC, "created_at"=>2014-01-21 23:25:32 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.8384ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5091ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52df01ec727775176f010000'), "purchase_id"=>BSON::ObjectId('52df01ec727775176f000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-21 23:25:32 UTC, "created_at"=>2014-01-21 23:25:32 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.9812ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5593ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-01-21 23:25:32 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.6495ms
Redirected to http://localhost:3000/cart
Completed 302 Found in 56ms


Started GET "/cart" for 127.0.0.1 at 2014-01-22 07:25:32 +0800

ActionController::RoutingError (No route matches [GET] "/cart"):
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (11.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (6.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (179.6ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:25:42 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3774ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2258ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0583ms
Completed 500 Internal Server Error in 15ms

NoMethodError (undefined method `id' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:10:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__30731228427505532__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__852611773802659745__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (75.0ms)


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 07:45:39 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.6240ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3359ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (185.2ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 2.1721ms
Completed 200 OK in 735ms (Views: 653.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:45:41 +0800


Started GET "/store/products/new" for 127.0.0.1 at 2014-01-22 07:45:44 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/_form.html.erb (719.6ms)
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/new.html.erb within layouts/ecom/application (749.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3846ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2318ms
Completed 200 OK in 802ms (Views: 798.2ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:45:45 +0800


Started POST "/store/products" for 127.0.0.1 at 2014-01-22 07:47:05 +0800
Processing by Ecom::ProductsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"v/qT/sZavHPKKxPe1ieb1+F/XrJL5Xt73dfgdEmEUxg=", "product"=>{"name"=>"Do Androids Dream of Electric Sheep - Philip K Dick", "sku"=>"PKD 1", "description"=>"A book that inspired the movie", "base_price"=>"10", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000054945d0 @tempfile=#<File:/tmp/RackMultipart20140122-6534-8uf4hd>, @original_filename="bladerunner.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"bladerunner.jpg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Create Product"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4176ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$all"=>[/^do\-androids\-dream\-of\-electric\-sheep\-philip\-k\-dick(?:-(\d+))?$/]}, "_id"=>{"$ne"=>BSON::ObjectId('52df06f97277751986000000')}} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 32.9388ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_products documents=[{"_id"=>BSON::ObjectId('52df06f97277751986000000'), "_slugs"=>["do-androids-dream-of-electric-sheep-philip-k-dick"], "name"=>"Do Androids Dream of Electric Sheep - Philip K Dick", "description"=>"A book that inspired the movie", "base_price"=>10.0, "sku"=>"PKD 1", "image"=>"bladerunner.jpg"}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 2.0545ms
Redirected to http://localhost:3000/store/products/do-androids-dream-of-electric-sheep-philip-k-dick
Completed 302 Found in 338ms


Started GET "/store/products/do-androids-dream-of-electric-sheep-philip-k-dick" for 127.0.0.1 at 2014-01-22 07:47:06 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"do-androids-dream-of-electric-sheep-philip-k-dick"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["do-androids-dream-of-electric-sheep-philip-k-dick"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.6652ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.9075ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (18.8ms)
Completed 200 OK in 72ms (Views: 63.8ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:06 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 07:47:09 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4249ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.4906ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (21.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5900ms
Completed 200 OK in 73ms (Views: 69.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:47:09 +0800


Started GET "/store/products/do-androids-dream-of-electric-sheep-philip-k-dick" for 127.0.0.1 at 2014-01-22 07:50:22 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"do-androids-dream-of-electric-sheep-philip-k-dick"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2932ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["do-androids-dream-of-electric-sheep-philip-k-dick"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.4413ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5452ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (11.3ms)
Completed 200 OK in 74ms (Views: 50.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:50:23 +0800


Started GET "/store/products/do-androids-dream-of-electric-sheep-philip-k-dick/edit" for 127.0.0.1 at 2014-01-22 07:50:26 +0800
Processing by Ecom::ProductsController#edit as HTML
  Parameters: {"id"=>"do-androids-dream-of-electric-sheep-philip-k-dick"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6260ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["do-androids-dream-of-electric-sheep-philip-k-dick"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.5736ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/_form.html.erb (18.6ms)
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/edit.html.erb within layouts/ecom/application (28.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.9251ms
Completed 200 OK in 90ms (Views: 76.8ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:26 +0800


Started PATCH "/store/products/do-androids-dream-of-electric-sheep-philip-k-dick" for 127.0.0.1 at 2014-01-22 07:50:36 +0800
Processing by Ecom::ProductsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"v/qT/sZavHPKKxPe1ieb1+F/XrJL5Xt73dfgdEmEUxg=", "product"=>{"name"=>"Do Androids Dream of Electric Sheep - Philip K Dick", "sku"=>"PKD 1", "description"=>"A book that inspired the movie", "base_price"=>"10.0", "image"=>#<ActionDispatch::Http::UploadedFile:0x0000000556cf48 @tempfile=#<File:/tmp/RackMultipart20140122-6534-184wc26>, @original_filename="bladerunner.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"bladerunner.jpg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Update Product", "id"=>"do-androids-dream-of-electric-sheep-philip-k-dick"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4757ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["do-androids-dream-of-electric-sheep-philip-k-dick"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.7051ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.7958ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df06f97277751986000000')} update={"$set"=>{"image"=>"bladerunner.jpg"}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7744ms
Redirected to http://localhost:3000/store/products/do-androids-dream-of-electric-sheep-philip-k-dick
Completed 302 Found in 51ms


Started GET "/store/products/do-androids-dream-of-electric-sheep-philip-k-dick" for 127.0.0.1 at 2014-01-22 07:50:37 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"do-androids-dream-of-electric-sheep-philip-k-dick"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["do-androids-dream-of-electric-sheep-philip-k-dick"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.5249ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4533ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (12.9ms)
Completed 200 OK in 65ms (Views: 57.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:50:37 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 07:50:39 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4398ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3855ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (19.1ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 2.1961ms
Completed 200 OK in 237ms (Views: 234.5ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:50:40 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 07:50:59 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3673ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1976ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (20.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6997ms
Completed 200 OK in 76ms (Views: 72.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:51:00 +0800


Started GET "/store/products/new" for 127.0.0.1 at 2014-01-22 07:54:44 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/_form.html.erb (23.4ms)
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/new.html.erb within layouts/ecom/application (30.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3754ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6669ms
Completed 200 OK in 93ms (Views: 90.2ms)


Started GET "/store/products/new" for 127.0.0.1 at 2014-01-22 07:54:44 +0800
Processing by Ecom::ProductsController#new as HTML
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/_form.html.erb (17.7ms)
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/new.html.erb within layouts/ecom/application (24.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3172ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3305ms
Completed 200 OK in 85ms (Views: 82.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:54:45 +0800


Started POST "/store/products" for 127.0.0.1 at 2014-01-22 07:55:53 +0800
Processing by Ecom::ProductsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"v/qT/sZavHPKKxPe1ieb1+F/XrJL5Xt73dfgdEmEUxg=", "product"=>{"name"=>"Animal Farm - George Orwell", "sku"=>"GO1", "description"=>"George Orwell's classic", "base_price"=>"9", "image"=>#<ActionDispatch::Http::UploadedFile:0x0000000521b358 @tempfile=#<File:/tmp/RackMultipart20140122-6534-5cbfs0>, @original_filename="222.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"222.jpg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Create Product"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.8293ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$all"=>[/^animal\-farm\-george\-orwell(?:-(\d+))?$/]}, "_id"=>{"$ne"=>BSON::ObjectId('52df09097277751986010000')}} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5913ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_products documents=[{"_id"=>BSON::ObjectId('52df09097277751986010000'), "_slugs"=>["animal-farm-george-orwell"], "name"=>"Animal Farm - George Orwell", "description"=>"George Orwell's classic", "base_price"=>9.0, "sku"=>"GO1", "image"=>"222.jpg"}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7311ms
Redirected to http://localhost:3000/store/products/animal-farm-george-orwell
Completed 302 Found in 128ms


Started GET "/store/products/animal-farm-george-orwell" for 127.0.0.1 at 2014-01-22 07:55:53 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"animal-farm-george-orwell"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["animal-farm-george-orwell"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.6476ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3916ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (12.8ms)
Completed 200 OK in 64ms (Views: 55.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:55:53 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 07:55:56 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.4299ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (19.2ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4464ms
Completed 200 OK in 65ms (Views: 62.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:55:56 +0800


Started GET "/store/products/animal-farm-george-orwell" for 127.0.0.1 at 2014-01-22 07:57:03 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"animal-farm-george-orwell"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4561ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["animal-farm-george-orwell"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.5106ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3872ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (13.0ms)
Completed 200 OK in 65ms (Views: 53.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:04 +0800


Started GET "/store/products/animal-farm-george-orwell/edit" for 127.0.0.1 at 2014-01-22 07:57:06 +0800
Processing by Ecom::ProductsController#edit as HTML
  Parameters: {"id"=>"animal-farm-george-orwell"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2707ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["animal-farm-george-orwell"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.2816ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/_form.html.erb (16.1ms)
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/edit.html.erb within layouts/ecom/application (22.6ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5321ms
Completed 200 OK in 88ms (Views: 78.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:07 +0800


Started PATCH "/store/products/animal-farm-george-orwell" for 127.0.0.1 at 2014-01-22 07:57:17 +0800
Processing by Ecom::ProductsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"v/qT/sZavHPKKxPe1ieb1+F/XrJL5Xt73dfgdEmEUxg=", "product"=>{"name"=>"Animal Farm - George Orwell", "sku"=>"GO1", "description"=>"George Orwell's classic", "base_price"=>"9.0", "image"=>#<ActionDispatch::Http::UploadedFile:0x00000005688288 @tempfile=#<File:/tmp/RackMultipart20140122-6534-3xw7oz>, @original_filename="222.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"222.jpg\"\r\nContent-Type: image/jpeg\r\n">, "image_cache"=>""}, "commit"=>"Update Product", "id"=>"animal-farm-george-orwell"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2875ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["animal-farm-george-orwell"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.3661ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df09097277751986010000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3911ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df09097277751986010000')} update={"$set"=>{"image"=>"222.jpg"}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.5248ms
Redirected to http://localhost:3000/store/products/animal-farm-george-orwell
Completed 302 Found in 41ms


Started GET "/store/products/animal-farm-george-orwell" for 127.0.0.1 at 2014-01-22 07:57:17 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"animal-farm-george-orwell"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["animal-farm-george-orwell"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.5229ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5371ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (13.4ms)
Completed 200 OK in 72ms (Views: 64.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:57:17 +0800


Started GET "/" for 127.0.0.1 at 2014-01-22 07:57:18 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 272ms (Views: 267.8ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:19 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:19 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:19 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:19 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:19 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:19 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:19 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 07:57:25 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3080ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2220ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (22.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4483ms
Completed 200 OK in 71ms (Views: 68.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 07:57:25 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 07:59:22 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.7443ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3928ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3079ms
Completed 500 Internal Server Error in 53ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3137355036649000732__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__1314464082509466681__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (89.1ms)


Started GET "/store" for 127.0.0.1 at 2014-01-22 08:16:05 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.5229ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3727ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (190.6ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.7086ms
Completed 200 OK in 746ms (Views: 663.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:16:06 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:16:06 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:16:06 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:16:06 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:16:06 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:16:06 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:16:07 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:16:07 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:16:07 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:16:07 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:16:07 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:16:07 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:16:07 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 08:16:07 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 08:16:15 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6019ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4480ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5274ms
Completed 500 Internal Server Error in 73ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3353058044529113688__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2401633580391025645__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (82.8ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 08:17:56 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5894ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.7116ms
Completed 500 Internal Server Error in 241ms

NoMethodError (undefined method `session' for "@@@@@@@@@@":String):
  app/controllers/ecom/cart_controller.rb:37:in `get_cart_value'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (95.7ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 08:19:04 +0800

SyntaxError (/home/rwub/rails4-book/book/6294OS_Chapter_10/project-10/app/controllers/ecom/cart_controller.rb:41: syntax error, unexpected tIVAR
         Rails.logger.info"@@@@@@@@@@".@cart.inspect
                                            ^):
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:424:in `block in load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:616:in `new_constants_in'
  activesupport (4.0.2) lib/active_support/dependencies.rb:423:in `load_file'
  activesupport (4.0.2) lib/active_support/dependencies.rb:324:in `require_or_load'
  activesupport (4.0.2) lib/active_support/dependencies.rb:463:in `load_missing_constant'
  activesupport (4.0.2) lib/active_support/dependencies.rb:184:in `const_missing'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:228:in `const_get'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:228:in `block in constantize'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `each'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `inject'
  activesupport (4.0.2) lib/active_support/inflector/methods.rb:224:in `constantize'
  activesupport (4.0.2) lib/active_support/dependencies.rb:535:in `get'
  activesupport (4.0.2) lib/active_support/dependencies.rb:566:in `constantize'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:76:in `controller_reference'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:66:in `controller'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:44:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2401633580391025645__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (7.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (80.9ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 08:19:37 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4623ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3399ms
@@@@@@@@@@BSON::ObjectId('52df01ec727775176f000000')
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3679ms
Completed 500 Internal Server Error in 56ms

NoMethodError (undefined method `save' for nil:NilClass):
  app/controllers/ecom/cart_controller.rb:9:in `add'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (167.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (248.5ms)


Started GET "/store/cart/add/52df06f97277751986000000" for 127.0.0.1 at 2014-01-22 08:20:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df06f97277751986000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 3.7628ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 3.7249ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 3.4056ms
@@@@@@@@@@BSON::ObjectId('52df01ec727775176f000000')
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df06f97277751986000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 4.5090ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52df0ecf7277752276000000'), "purchase_id"=>BSON::ObjectId('52df01ec727775176f000000'), "product_id"=>BSON::ObjectId('52df06f97277751986000000'), "price"=>10.0, "updated_at"=>2014-01-22 00:20:31 UTC, "created_at"=>2014-01-22 00:20:31 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 21.8773ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 4.0845ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} update={"$set"=>{"total_price"=>20.0, "updated_at"=>2014-01-22 00:20:31 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 4.5507ms
Redirected to http://localhost:3000/cart
Completed 302 Found in 333ms


Started GET "/cart" for 127.0.0.1 at 2014-01-22 08:20:31 +0800

ActionController::RoutingError (No route matches [GET] "/cart"):
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (17.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (13.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (42.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (139.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1245.9ms)


Started GET "/store/cart/add/52df09097277751986010000" for 127.0.0.1 at 2014-01-22 08:24:36 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df09097277751986010000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6165ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6511ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3712ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df09097277751986010000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.4831ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52df0fc57277752276010000'), "purchase_id"=>BSON::ObjectId('52df01ec727775176f000000'), "product_id"=>BSON::ObjectId('52df09097277751986010000'), "price"=>9.0, "updated_at"=>2014-01-22 00:24:37 UTC, "created_at"=>2014-01-22 00:24:37 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7284ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.9058ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} update={"$set"=>{"total_price"=>29.0, "updated_at"=>2014-01-22 00:24:37 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 8.9555ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 104ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 08:24:37 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6591ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2837ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 2.5717ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.8015ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2858ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (29.1ms)
Completed 500 Internal Server Error in 60ms

ActionView::Template::Error (undefined method `title' for #<Ecom::Product:0x0000000457ac20>):
    11:   </tr>
    12:   <% for line_item in @cart.line_items %>
    13:     <tr>
    14:       <td><%= line_item.product.title %></td>
    15:       <td><%= number_to_currency line_item.price %></td>
    16:       <td><%= link_to "Remove", remove_from_cart_path(line_item), :method => :post %></td>
    17:     </tr>
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/proxy.rb:150:in `method_missing'
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:14:in `block in __home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__4279907258019936365_36379900'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/referenced/many.rb:165:in `block in each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/targets/enumerable.rb:184:in `block in each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/contextual/mongo.rb:671:in `yield_document'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/contextual/mongo.rb:124:in `block (2 levels) in each'
  moped (2.0.0.beta5) lib/moped/cursor.rb:28:in `block in each'
  moped (2.0.0.beta5) lib/moped/cursor.rb:28:in `each'
  moped (2.0.0.beta5) lib/moped/cursor.rb:28:in `each'
  moped (2.0.0.beta5) lib/moped/query.rb:77:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/contextual/mongo.rb:123:in `block in each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/contextual/mongo.rb:650:in `selecting'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/contextual/mongo.rb:122:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/contextual.rb:20:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/targets/enumerable.rb:181:in `each'
  /home/rwub/.rvm/gems/ruby-1.9.3-p327/bundler/gems/mongoid-a65bd5f9cd6c/lib/mongoid/relations/referenced/many.rb:165:in `each'
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:12:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__4279907258019936365_36379900'
  actionpack (4.0.2) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.2) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.2) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.2) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3353058044529113688__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2401633580391025645__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (74.7ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4879ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 12.7929ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 08:29:58 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.4715ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3688ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1800ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 2.4299ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.6045ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6221ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4703ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df09097277751986010000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1295ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (568.1ms)
Completed 200 OK in 1354ms (Views: 1073.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:29:59 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:30:00 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 08:31:14 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6053ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5906ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (43.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3581ms
Completed 200 OK in 100ms (Views: 95.6ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 08:31:15 +0800


Started GET "/store/products/do-androids-dream-of-electric-sheep-philip-k-dick" for 127.0.0.1 at 2014-01-22 08:31:20 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"do-androids-dream-of-electric-sheep-philip-k-dick"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6558ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["do-androids-dream-of-electric-sheep-philip-k-dick"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.6698ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.8702ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (18.3ms)
Completed 200 OK in 73ms (Views: 59.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 08:31:21 +0800


Started GET "/" for 127.0.0.1 at 2014-01-22 08:32:38 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 116ms (Views: 111.8ms)


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:39 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:39 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:39 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:39 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:39 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:39 +0800


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:39 +0800


Started GET "/store/products/do-androids-dream-of-electric-sheep-philip-k-dick" for 127.0.0.1 at 2014-01-22 08:32:44 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"do-androids-dream-of-electric-sheep-philip-k-dick"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5275ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["do-androids-dream-of-electric-sheep-philip-k-dick"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.3577ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.7951ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (16.0ms)
Completed 200 OK in 75ms (Views: 63.0ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 08:32:44 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 08:32:50 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3748ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5328ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (25.5ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5547ms
Completed 200 OK in 80ms (Views: 77.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:50 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:50 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:50 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:50 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:50 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:32:51 +0800


Started GET "/cart" for 127.0.0.1 at 2014-01-22 08:33:02 +0800

ActionController::RoutingError (No route matches [GET] "/cart"):
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (5.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (16.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (65.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (496.4ms)


Started GET "/store/cart/add/52df06f97277751986000000" for 127.0.0.1 at 2014-01-22 08:33:08 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df06f97277751986000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4672ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4666ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.6185ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df06f97277751986000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 2.0700ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52df11c572777526df000000'), "purchase_id"=>BSON::ObjectId('52df01ec727775176f000000'), "product_id"=>BSON::ObjectId('52df06f97277751986000000'), "price"=>10.0, "updated_at"=>2014-01-22 00:33:09 UTC, "created_at"=>2014-01-22 00:33:09 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.9450ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.9608ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} update={"$set"=>{"total_price"=>39.0, "updated_at"=>2014-01-22 00:33:09 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 5.9515ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 217ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 08:33:09 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.6804ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2068ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 2.2471ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 2.0511ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4343ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3285ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df09097277751986010000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2495ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4322ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (47.3ms)
Completed 200 OK in 104ms (Views: 92.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:09 +0800


Started POST "/store/cart/remove/52df11c572777526df000000" for 127.0.0.1 at 2014-01-22 08:33:12 +0800
Processing by Ecom::CartController#remove as HTML
  Parameters: {"authenticity_token"=>"v/qT/sZavHPKKxPe1ieb1+F/XrJL5Xt73dfgdEmEUxg=", "id"=>"52df11c572777526df000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5031ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5318ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2213ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000'), "_id"=>BSON::ObjectId('52df11c572777526df000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.5928ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_line_items selector={"_id"=>BSON::ObjectId('52df11c572777526df000000')} flags=[:remove_first]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.7814ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 2.2744ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 37ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 08:33:12 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3618ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0478ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.7647ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.8334ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2306ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3615ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df09097277751986010000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4659ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (40.5ms)
Completed 200 OK in 96ms (Views: 85.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:33:12 +0800


Started GET "/" for 127.0.0.1 at 2014-01-22 08:52:06 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.3ms)
Completed 200 OK in 29ms (Views: 25.8ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:07 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:07 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:07 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:07 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:07 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:07 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:07 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 08:52:10 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4329ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 4.7854ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (29.1ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.5525ms
Completed 200 OK in 85ms (Views: 80.7ms)


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:10 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:10 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:11 +0800


Started GET "/store/products/do-androids-dream-of-electric-sheep-philip-k-dick" for 127.0.0.1 at 2014-01-22 08:52:14 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"do-androids-dream-of-electric-sheep-philip-k-dick"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2341ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["do-androids-dream-of-electric-sheep-philip-k-dick"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 1.2931ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3262ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (12.2ms)
Completed 200 OK in 65ms (Views: 54.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 08:52:14 +0800


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 09:35:05 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7273ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5951ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5785ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 20.4311ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52df01ec727775176f000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0158ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9345ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5900ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df09097277751986010000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6372ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (117.8ms)
Completed 200 OK in 149ms (Views: 134.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 09:35:05 +0800


Started GET "/" for 127.0.0.1 at 2014-01-22 19:17:16 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (23.4ms)
Completed 200 OK in 423ms (Views: 389.6ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:17 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 19:17:17 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:17 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:17 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:17 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:17 +0800


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 19:17:17 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 19:17:21 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3148ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 25.2559ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (107.7ms)
Completed 200 OK in 298ms (Views: 295.6ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:21 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:22 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:22 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 19:17:22 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 19:17:22 +0800


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-22 19:57:30 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (4.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (814.7ms)
Completed 200 OK in 1040ms (Views: 973.8ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-22 19:57:37 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Pozw7NiEc4DTe3usAPwT91VbOOwbkMSUJU4ffPTaJ+4=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.2379ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 26.4057ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_users selector={"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')} update={"$set"=>{"last_sign_in_at"=>2014-01-21 23:25:27 UTC, "current_sign_in_at"=>2014-01-22 11:57:37 UTC, "sign_in_count"=>6, "updated_at"=>2014-01-22 11:57:37 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9902ms
Redirected to http://localhost:3000/
Completed 302 Found in 691ms


Started GET "/" for 127.0.0.1 at 2014-01-22 19:57:37 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 60ms (Views: 58.1ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 19:57:38 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 19:57:38 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:38 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:38 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:38 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:38 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:38 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 19:57:41 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9343ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (16.6ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9471ms
Completed 200 OK in 134ms (Views: 131.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 19:57:41 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 19:57:41 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 19:57:42 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 19:57:44 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8990ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "updated_at"=>2014-01-22 11:57:44 UTC, "created_at"=>2014-01-22 11:57:44 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 30.1937ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7889ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfb23872777512c4010000'), "purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-22 11:57:44 UTC, "created_at"=>2014-01-22 11:57:44 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 16.4458ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7403ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-01-22 11:57:44 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9452ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 72ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 19:57:44 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7635ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5065ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9317ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5884ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6002ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (13.3ms)
Completed 200 OK in 38ms (Views: 32.5ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:44 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:44 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:44 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:44 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:44 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:44 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 19:57:44 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.9100ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={:_id=>BSON::ObjectId('52dfcd377277752403010000')} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5341ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"browse", "_id"=>BSON::ObjectId('52dfcd377277752403010000'), "updated_at"=>2014-01-22 13:53:30 UTC, "created_at"=>2014-01-22 13:53:30 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.3054ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={:_id=>BSON::ObjectId('52dfcd377277752403010000')} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8702ms


Started POST "/store/cart/remove/52dfb23872777512c4010000" for 127.0.0.1 at 2014-01-22 21:56:23 +0800
Processing by Ecom::CartController#remove as HTML
  Parameters: {"authenticity_token"=>"dm6Vu8Zrfo1D9y1lcWyLuki2Q+TL+Uc8JX+tcFk1Jfc=", "id"=>"52dfb23872777512c4010000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3080ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6549ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5848ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "_id"=>BSON::ObjectId('52dfb23872777512c4010000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9295ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_line_items selector={"_id"=>BSON::ObjectId('52dfb23872777512c4010000')} flags=[:remove_first]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.8482ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5250ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} update={"$set"=>{"state"=>"browse", "updated_at"=>2014-01-22 13:56:24 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.6091ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 151ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 21:56:24 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8364ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5934ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0425ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (158.0ms)
Completed 200 OK in 428ms (Views: 422.7ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:24 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:24 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:24 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:24 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:24 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:24 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:24 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 21:56:25 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1305ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0933ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (25.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7457ms
Completed 200 OK in 47ms (Views: 45.4ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:25 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:25 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:25 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:25 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:25 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:25 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 21:56:25 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 21:56:25 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 22:00:37 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7557ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8772ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (11.5ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8759ms
Completed 200 OK in 33ms (Views: 31.6ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:37 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:37 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:37 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:37 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:00:37 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:37 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:37 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:37 +0800


Started GET "/store/cart/add/52df06f97277751986000000" for 127.0.0.1 at 2014-01-22 22:00:39 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df06f97277751986000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7548ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6350ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5361ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df06f97277751986000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7170ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfcf077277752418000000'), "purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "product_id"=>BSON::ObjectId('52df06f97277751986000000'), "price"=>10.0, "updated_at"=>2014-01-22 14:00:39 UTC, "created_at"=>2014-01-22 14:00:39 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9728ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7064ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 21ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:00:39 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8038ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5958ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7708ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7415ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 5.6256ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (25.1ms)
Completed 200 OK in 61ms (Views: 55.5ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:39 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:39 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:39 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:39 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:39 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:39 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:00:39 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7629ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8758ms


Started POST "/store/cart/remove/52dfcf077277752418000000" for 127.0.0.1 at 2014-01-22 22:02:50 +0800
Processing by Ecom::CartController#remove as HTML
  Parameters: {"authenticity_token"=>"dm6Vu8Zrfo1D9y1lcWyLuki2Q+TL+Uc8JX+tcFk1Jfc=", "id"=>"52dfcf077277752418000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7000ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7591ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5803ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "_id"=>BSON::ObjectId('52dfcf077277752418000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7049ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_line_items selector={"_id"=>BSON::ObjectId('52dfcf077277752418000000')} flags=[:remove_first]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.5934ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4584ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 31ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:02:51 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8138ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5418ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6281ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (5.2ms)
Completed 200 OK in 29ms (Views: 23.2ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:51 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:51 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:51 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:51 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:51 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:51 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:51 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-01-22 22:02:52 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8504ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6064ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (12.2ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7663ms
Completed 200 OK in 34ms (Views: 32.6ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:52 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:52 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:52 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:02:52 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:52 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:52 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:52 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:52 +0800


Started GET "/store/cart/add/52df09097277751986010000" for 127.0.0.1 at 2014-01-22 22:02:54 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df09097277751986010000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6618ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6626ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5569ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df09097277751986010000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6102ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfcf8e7277752418010000'), "purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "product_id"=>BSON::ObjectId('52df09097277751986010000'), "price"=>9.0, "updated_at"=>2014-01-22 14:02:54 UTC, "created_at"=>2014-01-22 14:02:54 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7872ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7685ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} update={"$set"=>{"total_price"=>9.0, "updated_at"=>2014-01-22 14:02:54 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7480ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 21ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:02:54 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7807ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7109ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6945ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5908ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df09097277751986010000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5678ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (9.5ms)
Completed 200 OK in 32ms (Views: 26.4ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:54 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:54 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:55 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:55 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:55 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:55 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:02:55 +0800
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.3736ms


Started POST "/store/cart/remove/52dfcf8e7277752418010000" for 127.0.0.1 at 2014-01-22 22:03:56 +0800
Processing by Ecom::CartController#remove as HTML
  Parameters: {"authenticity_token"=>"dm6Vu8Zrfo1D9y1lcWyLuki2Q+TL+Uc8JX+tcFk1Jfc=", "id"=>"52dfcf8e7277752418010000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7978ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7327ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6531ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "_id"=>BSON::ObjectId('52dfcf8e7277752418010000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7689ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_line_items selector={"_id"=>BSON::ObjectId('52dfcf8e7277752418010000')} flags=[:remove_first]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.8035ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5553ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 124ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:03:57 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7734ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5425ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6676ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (5.8ms)
Completed 200 OK in 32ms (Views: 26.8ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:57 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:57 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:57 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:57 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:57 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:57 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:57 +0800


Started GET "/" for 127.0.0.1 at 2014-01-22 22:03:58 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 45ms (Views: 42.6ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:03:58 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 22:03:58 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:58 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:58 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:58 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:58 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:03:58 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 22:04:01 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7084ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6470ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (11.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0418ms
Completed 200 OK in 34ms (Views: 32.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:01 +0800


Started GET "/store/cart/add/52df06f97277751986000000" for 127.0.0.1 at 2014-01-22 22:04:03 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df06f97277751986000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.5882ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5937ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5473ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df06f97277751986000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6009ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfcfd37277752418020000'), "purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "product_id"=>BSON::ObjectId('52df06f97277751986000000'), "price"=>10.0, "updated_at"=>2014-01-22 14:04:03 UTC, "created_at"=>2014-01-22 14:04:03 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7258ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6043ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-01-22 14:04:03 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.6816ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 19ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:04:03 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7120ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5413ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8689ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6814ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6778ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (92.5ms)
Completed 200 OK in 115ms (Views: 110.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:04:03 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.9797ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8502ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"order_placed", "_id"=>BSON::ObjectId('52dfcff772777526cf000000'), "updated_at"=>2014-01-22 14:04:46 UTC, "created_at"=>2014-01-22 14:04:46 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.3214ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0843ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.7267ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{"state"=>"order_placed"}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1447ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1270ms


Started GET "/store/" for 127.0.0.1 at 2014-01-22 22:13:23 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7621ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5926ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (10.7ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7424ms
Completed 200 OK in 34ms (Views: 31.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:13:23 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 22:13:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8045ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5679ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6121ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfd2097277752418030000'), "purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-22 14:13:29 UTC, "created_at"=>2014-01-22 14:13:29 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7186ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6999ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} update={"$set"=>{"total_price"=>20.0, "updated_at"=>2014-01-22 14:13:29 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.8344ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 37ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:13:29 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7472ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4666ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3941ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9077ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0459ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0374ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (21.3ms)
Completed 200 OK in 46ms (Views: 41.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:13:29 +0800


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:15:30 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7207ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6565ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5193ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8773ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6399ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5986ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5764ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (30.0ms)
Completed 500 Internal Server Error in 43ms

ActionView::Template::Error (undefined method `stringify_keys' for "/store/cart/checkout":String):
    26: <%= form_tag checkout_path, :style => "text-align: right" do |f| %>
    27:   <%= link_to "Continue Shopping", root_path %>
    28:   or
    29:   <%= submit_tag "Checkout", checkout_path %>
    30: <% end %>
  actionpack (4.0.2) lib/action_view/helpers/form_tag_helper.rb:427:in `submit_tag'
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:29:in `block in __home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__750674524027817037_33584740'
  actionpack (4.0.2) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.2) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.2) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.2) lib/action_view/helpers/form_tag_helper.rb:773:in `form_tag_in_block'
  actionpack (4.0.2) lib/action_view/helpers/form_tag_helper.rb:69:in `form_tag'
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:26:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__750674524027817037_33584740'
  actionpack (4.0.2) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.2) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.2) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.2) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3489494097253334951__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2712622977098314709__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (33.7ms)


Started GET "/store/cart/checkout" for 127.0.0.1 at 2014-01-22 22:17:16 +0800

ActionController::RoutingError (No route matches [GET] "/store/cart/checkout"):
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (4.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (103.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (210.0ms)


Started GET "/cart/checkout" for 127.0.0.1 at 2014-01-22 22:17:21 +0800

ActionController::RoutingError (No route matches [GET] "/cart/checkout"):
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_route.html.erb (5.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (70.6ms)


Started GET "/store/cart/add/52df06f97277751986000000" for 127.0.0.1 at 2014-01-22 22:17:27 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df06f97277751986000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7680ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8418ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0721ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df06f97277751986000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7499ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfd2f77277752418040000'), "purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "product_id"=>BSON::ObjectId('52df06f97277751986000000'), "price"=>10.0, "updated_at"=>2014-01-22 14:17:27 UTC, "created_at"=>2014-01-22 14:17:27 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0528ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0342ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} update={"$set"=>{"total_price"=>30.0, "updated_at"=>2014-01-22 14:17:27 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.8813ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 40ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:17:27 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8364ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0771ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1929ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7677ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6386ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6689ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6347ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (17.9ms)
Completed 500 Internal Server Error in 31ms

ActionView::Template::Error (undefined method `stringify_keys' for "/store/cart/checkout":String):
    26: <%= form_tag checkout_path, :style => "text-align: right" do |f| %>
    27:   <%= link_to "Continue Shopping", root_path %>
    28:   or
    29:   <%= submit_tag "Checkout", checkout_path %>
    30: <% end %>
  actionpack (4.0.2) lib/action_view/helpers/form_tag_helper.rb:427:in `submit_tag'
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:29:in `block in __home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__750674524027817037_33584740'
  actionpack (4.0.2) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionpack (4.0.2) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  actionpack (4.0.2) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  actionpack (4.0.2) lib/action_view/helpers/form_tag_helper.rb:773:in `form_tag_in_block'
  actionpack (4.0.2) lib/action_view/helpers/form_tag_helper.rb:69:in `form_tag'
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:26:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__750674524027817037_33584740'
  actionpack (4.0.2) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.2) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.2) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.2) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__3489494097253334951__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__2712622977098314709__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (22.5ms)


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:18:11 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6957ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6000ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6219ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8892ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7232ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5897ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5651ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5638ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (18.7ms)
Completed 200 OK in 43ms (Views: 35.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:18:11 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-01-22 22:18:13 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dm6Vu8Zrfo1D9y1lcWyLuki2Q+TL+Uc8JX+tcFk1Jfc=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1072ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9925ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6053ms
Completed 500 Internal Server Error in 10ms

NoMethodError (undefined method `checkout!' for #<Ecom::Purchase:0x0000000382d518>):
  app/controllers/ecom/cart_controller.rb:28:in `checkout'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4423ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"order_placed", "_id"=>BSON::ObjectId('52dfd3587277752b8d000000'), "updated_at"=>2014-01-22 14:19:10 UTC, "created_at"=>2014-01-22 14:19:10 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9219ms


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-01-22 22:19:52 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dm6Vu8Zrfo1D9y1lcWyLuki2Q+TL+Uc8JX+tcFk1Jfc=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0994ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7815ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6513ms
Completed 500 Internal Server Error in 27ms

NoMethodError (undefined method `checkout!' for #<Ecom::Purchase:0x00000003dcc2f8>):
  app/controllers/ecom/cart_controller.rb:28:in `checkout'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (32.2ms)


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-01-22 22:22:05 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dm6Vu8Zrfo1D9y1lcWyLuki2Q+TL+Uc8JX+tcFk1Jfc=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2490ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6300ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4737ms
@@@@@@@@@@@#<Ecom::Purchase _id: 52dfb23872777512c4000000, created_at: 2014-01-22 11:57:44 UTC, updated_at: 2014-01-22 14:17:27 UTC, user_id: nil, checked_out_at: nil, total_price: 30.0, state: "browse">
Completed 500 Internal Server Error in 136ms

ArgumentError ("browse" is not a known state value):
  app/models/ecom/purchase.rb:30:in `checkout!'
  app/controllers/ecom/cart_controller.rb:29:in `checkout'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (36.7ms)


Started POST "/store/cart/remove/52dfcfd37277752418020000" for 127.0.0.1 at 2014-01-22 22:22:15 +0800
Processing by Ecom::CartController#remove as HTML
  Parameters: {"authenticity_token"=>"dm6Vu8Zrfo1D9y1lcWyLuki2Q+TL+Uc8JX+tcFk1Jfc=", "id"=>"52dfcfd37277752418020000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7060ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5823ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5483ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000'), "_id"=>BSON::ObjectId('52dfcfd37277752418020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7285ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_line_items selector={"_id"=>BSON::ObjectId('52dfcfd37277752418020000')} flags=[:remove_first]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7400ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6496ms
Completed 422 Unprocessable Entity in 239ms

Mongoid::Errors::Validations (
Problem:
  Validation of Ecom::Purchase failed.
Summary:
  The following errors were found: State is invalid
Resolution:
  Try persisting the document with valid data or remove the validations.):
  app/models/ecom/purchase.rb:26:in `recalculate_price!'
  app/controllers/ecom/cart_controller.rb:22:in `remove'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (29.8ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=project10_development command={:count=>"ecom_purchases", :query=>{}} runtime: 0.9011ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_purchases selector={} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0833ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:22:34 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8050ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7375ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfb23872777512c4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5139ms
Completed 404 Not Found in 9ms

Mongoid::Errors::DocumentNotFound (
Problem:
  Document(s) not found for class Ecom::Purchase with id(s) 52dfb23872777512c4000000.
Summary:
  When calling Ecom::Purchase.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 52dfb23872777512c4000000 ... (1 total) and the following ids were not found: 52dfb23872777512c4000000.
Resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause a nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  app/controllers/ecom/cart_controller.rb:43:in `get_cart_value'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (29.7ms)


Started DELETE "/store/users/sign_out" for 127.0.0.1 at 2014-01-22 22:22:41 +0800
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"dm6Vu8Zrfo1D9y1lcWyLuki2Q+TL+Uc8JX+tcFk1Jfc="}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6822ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5630ms
Redirected to http://localhost:3000/
Completed 302 Found in 45ms


Started GET "/" for 127.0.0.1 at 2014-01-22 22:22:41 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 132ms (Views: 130.2ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:41 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:41 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:41 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:41 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:41 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:41 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:41 +0800


Started GET "/store/products/" for 127.0.0.1 at 2014-01-22 22:22:46 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2787ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0329ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (26.2ms)
Completed 200 OK in 212ms (Views: 209.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:22:46 +0800


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-01-22 22:22:47 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/shared/_links.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.2/app/views/devise/sessions/new.html.erb (196.6ms)
Completed 200 OK in 221ms (Views: 205.4ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-01-22 22:22:52 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"QTxBFMaz8GYPLXZBzihiuLuw+M4qC4A2GM3JY7FRiV8=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0691ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0552ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_users selector={"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')} update={"$set"=>{"last_sign_in_at"=>2014-01-22 11:57:37 UTC, "current_sign_in_at"=>2014-01-22 14:22:52 UTC, "sign_in_count"=>7, "updated_at"=>2014-01-22 14:22:52 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9657ms
Redirected to http://localhost:3000/
Completed 302 Found in 510ms


Started GET "/" for 127.0.0.1 at 2014-01-22 22:22:52 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (0.1ms)
Completed 200 OK in 12ms (Views: 10.7ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:52 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:52 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:52 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:52 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:52 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:52 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:52 +0800


Started GET "/store" for 127.0.0.1 at 2014-01-22 22:22:56 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0688ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (8.8ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1848ms
Completed 200 OK in 29ms (Views: 28.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:22:56 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 22:23:01 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2781ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('52dfd4457277752c64000000'), "updated_at"=>2014-01-22 14:23:01 UTC, "created_at"=>2014-01-22 14:23:01 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.3690ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3140ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfd4457277752c64010000'), "purchase_id"=>BSON::ObjectId('52dfd4457277752c64000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-22 14:23:01 UTC, "created_at"=>2014-01-22 14:23:01 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.4453ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfd4457277752c64000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9285ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd4457277752c64000000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-01-22 14:23:01 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.3197ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 34ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:23:01 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7571ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd4457277752c64000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5043ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfd4457277752c64000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8336ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfd4457277752c64000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 72.7065ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7096ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (84.9ms)
Completed 200 OK in 107ms (Views: 101.7ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:01 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-01-22 22:23:06 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"sLPf/WxxBcWSuJgoDydPCWh1nPvcBTvXlbe4h5eZmao=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8784ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9083ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd4457277752c64000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8119ms
@@@@@@@@@@@#<Ecom::Purchase _id: 52dfd4457277752c64000000, created_at: 2014-01-22 14:23:01 UTC, updated_at: 2014-01-22 14:23:01 UTC, user_id: nil, checked_out_at: nil, total_price: 10.0, state: "cart_in_progress">
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd4457277752c64000000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-01-22 14:23:06 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.1293ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 18ms


Started GET "/store/" for 127.0.0.1 at 2014-01-22 22:23:06 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0502ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (8.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0053ms
Completed 200 OK in 33ms (Views: 31.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:23:06 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-01-22 22:28:32 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"sLPf/WxxBcWSuJgoDydPCWh1nPvcBTvXlbe4h5eZmao=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7181ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6140ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('52dfd5907277752c64020000'), "updated_at"=>2014-01-22 14:28:32 UTC, "created_at"=>2014-01-22 14:28:32 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7825ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd5907277752c64020000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-01-22 14:28:32 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7720ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 31ms


Started GET "/store/" for 127.0.0.1 at 2014-01-22 22:28:32 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9351ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (9.3ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8345ms
Completed 200 OK in 33ms (Views: 30.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:28:33 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-01-22 22:39:40 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7886ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7005ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('52dfd82c7277752c64030000'), "updated_at"=>2014-01-22 14:39:40 UTC, "created_at"=>2014-01-22 14:39:40 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7440ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6769ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfd82c7277752c64040000'), "purchase_id"=>BSON::ObjectId('52dfd82c7277752c64030000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-01-22 14:39:40 UTC, "created_at"=>2014-01-22 14:39:40 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.6711ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfd82c7277752c64030000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6475ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd82c7277752c64030000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-01-22 14:39:40 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7467ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 22ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 22:39:40 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7877ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd82c7277752c64030000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9836ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfd82c7277752c64030000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0445ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfd82c7277752c64030000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7322ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6933ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (10.9ms)
Completed 200 OK in 35ms (Views: 28.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:40 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:40 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:40 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:40 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:40 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:40 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:40 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:40 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:41 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:41 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:41 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:41 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:41 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-01-22 22:39:42 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"sLPf/WxxBcWSuJgoDydPCWh1nPvcBTvXlbe4h5eZmao=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1470ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd82c7277752c64030000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5976ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfd82c7277752c64030000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-01-22 14:39:42 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7832ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 11ms


Started GET "/store/" for 127.0.0.1 at 2014-01-22 22:39:42 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7315ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (8.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6624ms
Completed 200 OK in 28ms (Views: 25.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 22:39:43 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8128ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"order_placed", "_id"=>BSON::ObjectId('52dfdb787277752b8d010000'), "updated_at"=>2014-01-22 14:56:04 UTC, "created_at"=>2014-01-22 14:56:04 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0273ms
  MOPED: 127.0.0.1:27017 COMMAND      database=project10_development command={:count=>"ecom_purchases", :query=>{}} runtime: 0.8313ms
  MOPED: 127.0.0.1:27017 DELETE       database=project10_development collection=ecom_purchases selector={} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0883ms


Started GET "/" for 127.0.0.1 at 2014-01-22 23:07:38 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 255ms (Views: 220.7ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-01-22 23:07:38 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:38 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:38 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:38 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:38 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:38 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-01-22 23:07:38 +0800


Started GET "/store/products/" for 127.0.0.1 at 2014-01-22 23:07:42 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3182ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7496ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (20.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0571ms
Completed 200 OK in 138ms (Views: 135.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 23:07:42 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 23:07:42 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 23:07:42 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 23:07:42 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 23:07:43 +0800


Started GET "/store/cart/add/52df06f97277751986000000" for 127.0.0.1 at 2014-01-22 23:07:45 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df06f97277751986000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7709ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6096ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('52dfdec272777539a5000000'), "updated_at"=>2014-01-22 15:07:46 UTC, "created_at"=>2014-01-22 15:07:46 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0151ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df06f97277751986000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8057ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('52dfdec272777539a5010000'), "purchase_id"=>BSON::ObjectId('52dfdec272777539a5000000'), "product_id"=>BSON::ObjectId('52df06f97277751986000000'), "price"=>10.0, "updated_at"=>2014-01-22 15:07:46 UTC, "created_at"=>2014-01-22 15:07:46 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9921ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7403ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfdec272777539a5000000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-01-22 15:07:46 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9392ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 140ms


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 23:07:46 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0260ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7143ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8848ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6215ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6577ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (295.6ms)
Completed 500 Internal Server Error in 311ms

ActionView::Template::Error (undefined local variable or method `checkout_path' for #<#<Class:0x0000000312e050>:0x00000003133ed8>):
    23: </table>
    24: 
    25: <hr />
    26: <%= form_tag checkout_path, :style => "text-align: right" do |f| %>
    27:   <%= link_to "Continue Shopping", root_path %>
    28:   or
    29:   <%= submit_tag "Checkout"%>
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:26:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__3244616925445588510_25804540'
  actionpack (4.0.2) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.2) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.2) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.2) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__1153870152279731499__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3594702966318230277__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (26.4ms)


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 23:08:29 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7725ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6330ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6108ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1048ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6391ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6526ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (28.8ms)
Completed 500 Internal Server Error in 64ms

ActionView::Template::Error (undefined local variable or method `checkout_path' for #<#<Class:0x000000030d4938>:0x000000030d2bd8>):
    23: </table>
    24: 
    25: <hr />
    26: <%= form_tag checkout_path, :style => "text-align: right" do |f| %>
    27:   <%= link_to "Continue Shopping", root_path %>
    28:   or
    29:   <%= submit_tag "Checkout"%>
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:26:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__3244616925445588510_25804540'
  actionpack (4.0.2) lib/action_view/template.rb:143:in `block in render'
  activesupport (4.0.2) lib/active_support/notifications.rb:161:in `instrument'
  actionpack (4.0.2) lib/action_view/template.rb:141:in `render'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:49:in `block (2 levels) in render_template'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:48:in `block in render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:56:in `render_with_layout'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionpack (4.0.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:127:in `_render_template'
  actionpack (4.0.2) lib/action_controller/metal/streaming.rb:219:in `_render_template'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:120:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:33:in `render_to_body'
  actionpack (4.0.2) lib/action_controller/metal/renderers.rb:26:in `render_to_body'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:97:in `render'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.0.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.0.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (4.0.2) lib/active_support/callbacks.rb:413:in `_run__1153870152279731499__process_action__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.0.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.0.2) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.0.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.0.2) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
  actionpack (4.0.2) lib/abstract_controller/base.rb:136:in `process'
  actionpack (4.0.2) lib/abstract_controller/rendering.rb:44:in `process'
  actionpack (4.0.2) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.0.2) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/railtie/configurable.rb:30:in `method_missing'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.0.2) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.0.2) lib/action_dispatch/routing/route_set.rb:680:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/flash.rb:241:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/cookies.rb:486:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.2) lib/active_support/callbacks.rb:373:in `_run__3594702966318230277__call__callbacks'
  activesupport (4.0.2) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `block in tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:25:in `tagged'
  activesupport (4.0.2) lib/active_support/tagged_logging.rb:67:in `tagged'
  railties (4.0.2) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.2) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.2) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.0.2) lib/rails/engine.rb:511:in `call'
  railties (4.0.2) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.7.1) lib/puma/server.rb:486:in `handle_request'
  puma (2.7.1) lib/puma/server.rb:357:in `process_client'
  puma (2.7.1) lib/puma/server.rb:250:in `block in run'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.7.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (27.3ms)


Started GET "/store/cart" for 127.0.0.1 at 2014-01-22 23:25:34 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 8.7574ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7310ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 4.2675ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8695ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5965ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5824ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (188.9ms)
Completed 200 OK in 615ms (Views: 457.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:35 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:35 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:35 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:35 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:35 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:35 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:36 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:36 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:36 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:36 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:36 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:36 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:36 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-01-22 23:25:38 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"sLPf/WxxBcWSuJgoDydPCWh1nPvcBTvXlbe4h5eZmao=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7331ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5708ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfdec272777539a5000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5241ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('52dfdec272777539a5000000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-01-22 15:25:38 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9908ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 24ms


Started GET "/store/" for 127.0.0.1 at 2014-01-22 23:25:38 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8101ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (15.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9338ms
Completed 200 OK in 38ms (Views: 36.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-01-22 23:25:38 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-01-22 23:25:39 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-01-22 23:25:39 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.9240ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{"state"=>"order_placed"}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0848ms
  MOPED: 127.0.0.1:27017 COMMAND      database=project10_development command={:count=>"ecom_purchases", :query=>{"state"=>"order_placed"}} runtime: 0.9296ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"$query"=>{"state"=>"order_placed"}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2557ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1897ms


Started GET "/store" for 127.0.0.1 at 2014-03-08 13:08:52 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 23.4223ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 101.7647ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (204.5ms)
Completed 200 OK in 1006ms (Views: 957.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-08 13:08:54 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-08 13:08:59 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
Completed 401 Unauthorized in 185ms


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-03-08 13:09:00 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.3/app/views/devise/shared/_links.erb (6.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.3/app/views/devise/sessions/new.html.erb (353.2ms)
Completed 200 OK in 541ms (Views: 400.4ms)


Started GET "/store/products" for 127.0.0.1 at 2014-03-08 13:09:07 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7228ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6703ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (15.4ms)
Completed 200 OK in 49ms (Views: 47.6ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:09:07 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:09:07 +0800


Started GET "/" for 127.0.0.1 at 2014-03-08 13:09:11 +0800
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application (1.4ms)
Warning. Error encountered while saving cache 306080781e1f189fa2670a47e5b6c80fb3541dbd/home.css.scssc: can't dump anonymous class #<Class:0x000000021cd700>
Completed 200 OK in 1519ms (Views: 1515.4ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-03-08 13:09:13 +0800


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-03-08 13:09:13 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:09:13 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:09:13 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-03-08 13:09:13 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-03-08 13:09:13 +0800


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-03-08 13:09:13 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-03-08 13:19:44 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.2375ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1530ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (41.1ms)
Completed 200 OK in 553ms (Views: 488.9ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:19:45 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:19:45 +0800


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-03-08 13:19:47 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.9114ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 18.6510ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (9.4ms)
Completed 200 OK in 62ms (Views: 37.6ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:19:47 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:19:47 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-08 13:20:18 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
Completed 401 Unauthorized in 23ms


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-03-08 13:20:18 +0800
Processing by Devise::SessionsController#new as HTML
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.3/app/views/devise/shared/_links.erb (6.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/devise-3.2.3/app/views/devise/sessions/new.html.erb (278.0ms)
Completed 200 OK in 312ms (Views: 291.0ms)


Started POST "/store/users/sign_in" for 127.0.0.1 at 2014-03-08 13:20:24 +0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hO9lS6kSXxLY99Qa2apeFcCvxk9GmRPqJSjw1nz4Gcw=", "user"=>{"email"=>"saurabh.a.bhatia@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1606ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"email"=>"saurabh.a.bhatia@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 41.4218ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_users selector={"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')} update={"$set"=>{"last_sign_in_at"=>2014-01-22 14:22:52 UTC, "current_sign_in_at"=>2014-03-08 05:20:24 UTC, "sign_in_count"=>8, "updated_at"=>2014-03-08 05:20:24 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 16.3203ms
Redirected to http://localhost:3000/store/cart/add/52ddbd5972777514d4000000
Completed 302 Found in 714ms


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-08 13:20:24 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 2.5179ms
Completed 500 Internal Server Error in 15ms

NoMethodError (protected method `around_validation' called for #<StateMachine::Machine:0x00000002f41210>):
  app/controllers/ecom/cart_controller.rb:38:in `get_cart_value'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (8.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (57.6ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-08 13:21:32 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0170ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2267ms
Completed 500 Internal Server Error in 40ms

NoMethodError (protected method `around_validation' called for #<StateMachine::Machine:0x00000002f41210>):
  app/controllers/ecom/cart_controller.rb:38:in `get_cart_value'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.3ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-08 13:24:14 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.9660ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1407ms
Completed 500 Internal Server Error in 243ms

NoMethodError (protected method `around_validation' called for #<StateMachine::Machine:0x0000000296a800>):
  app/controllers/ecom/cart_controller.rb:38:in `get_cart_value'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (78.0ms)


Started GET "/store/users/sign_in" for 127.0.0.1 at 2014-03-08 13:26:02 +0800
Processing by Devise::SessionsController#new as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0553ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2113ms
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 245ms


Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2014-03-08 13:26:03 +0800


Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2014-03-08 13:26:03 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:26:03 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:26:03 +0800


Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-03-08 13:26:03 +0800


Started GET "/store" for 127.0.0.1 at 2014-03-08 13:26:09 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6256ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.7018ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (33.3ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2695ms
Completed 200 OK in 338ms (Views: 335.8ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:26:10 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:26:10 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-08 13:26:15 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8582ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8580ms
Completed 500 Internal Server Error in 10ms

NoMethodError (protected method `around_validation' called for #<StateMachine::Machine:0x0000000296a800>):
  app/controllers/ecom/cart_controller.rb:38:in `get_cart_value'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (59.0ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-08 13:32:53 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3203ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6554ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531aab857277756e1b000000'), "updated_at"=>2014-03-08 05:32:53 UTC, "created_at"=>2014-03-08 05:32:53 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 28.3102ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9758ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531aab857277756e1b010000'), "purchase_id"=>BSON::ObjectId('531aab857277756e1b000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-08 05:32:53 UTC, "created_at"=>2014-03-08 05:32:53 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 51.6668ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531aab857277756e1b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8182ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531aab857277756e1b000000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-03-08 05:32:53 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.4797ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 266ms


Started GET "/store/cart" for 127.0.0.1 at 2014-03-08 13:32:53 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6822ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531aab857277756e1b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6115ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531aab857277756e1b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8438ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531aab857277756e1b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7550ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5959ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (429.3ms)
Completed 200 OK in 674ms (Views: 668.6ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 13:32:54 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-03-08 13:33:26 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MkYrMeRmwtruzR5nabghVOU4mRZI/oi0pcwFsUdXWU0=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7234ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6579ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531aab857277756e1b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6235ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531aab857277756e1b000000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-03-08 05:33:26 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0069ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 13ms


Started GET "/store/" for 127.0.0.1 at 2014-03-08 13:33:26 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9056ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (15.2ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8710ms
Completed 200 OK in 41ms (Views: 38.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 13:33:26 +0800


Started GET "/store/" for 127.0.0.1 at 2014-03-08 14:34:05 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 9.5320ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8777ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (40.7ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8569ms
Completed 200 OK in 374ms (Views: 335.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-08 14:34:06 +0800


Started GET "/store/cart/add/52df06f97277751986000000" for 127.0.0.1 at 2014-03-08 14:34:10 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df06f97277751986000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8095ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531ab9e27277757156000000'), "updated_at"=>2014-03-08 06:34:10 UTC, "created_at"=>2014-03-08 06:34:10 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 8.4620ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df06f97277751986000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 77.2612ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531ab9e27277757156010000'), "purchase_id"=>BSON::ObjectId('531ab9e27277757156000000'), "product_id"=>BSON::ObjectId('52df06f97277751986000000'), "price"=>10.0, "updated_at"=>2014-03-08 06:34:10 UTC, "created_at"=>2014-03-08 06:34:10 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 14.0110ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531ab9e27277757156000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1449ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531ab9e27277757156000000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-03-08 06:34:10 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.2024ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 152ms


Started GET "/store/cart" for 127.0.0.1 at 2014-03-08 14:34:10 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6612ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531ab9e27277757156000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4485ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531ab9e27277757156000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8257ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531ab9e27277757156000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5948ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df06f97277751986000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5824ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (356.4ms)
Completed 200 OK in 379ms (Views: 374.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:11 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-03-08 14:34:30 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MkYrMeRmwtruzR5nabghVOU4mRZI/oi0pcwFsUdXWU0=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.8189ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6297ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531ab9e27277757156000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6819ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531ab9e27277757156000000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-03-08 06:34:30 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7873ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 14ms


Started GET "/store/" for 127.0.0.1 at 2014-03-08 14:34:30 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7851ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (7.3ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7020ms
Completed 200 OK in 28ms (Views: 27.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-08 14:34:30 +0800


Started GET "/store/cart/add/52df09097277751986010000" for 127.0.0.1 at 2014-03-08 14:53:46 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52df09097277751986010000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0844ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0525ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531abe7a7277757156020000'), "updated_at"=>2014-03-08 06:53:46 UTC, "created_at"=>2014-03-08 06:53:46 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.8562ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52df09097277751986010000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6575ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531abe7a7277757156030000'), "purchase_id"=>BSON::ObjectId('531abe7a7277757156020000'), "product_id"=>BSON::ObjectId('52df09097277751986010000'), "price"=>9.0, "updated_at"=>2014-03-08 06:53:46 UTC, "created_at"=>2014-03-08 06:53:46 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.8927ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531abe7a7277757156020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0911ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531abe7a7277757156020000')} update={"$set"=>{"total_price"=>9.0, "updated_at"=>2014-03-08 06:53:46 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.1763ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 26ms


Started GET "/store/cart" for 127.0.0.1 at 2014-03-08 14:53:46 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6145ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531abe7a7277757156020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5201ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531abe7a7277757156020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6752ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531abe7a7277757156020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5367ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52df09097277751986010000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5279ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (9.5ms)
Completed 200 OK in 30ms (Views: 25.3ms)


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:46 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-03-08 14:53:48 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MkYrMeRmwtruzR5nabghVOU4mRZI/oi0pcwFsUdXWU0=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6999ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6270ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531abe7a7277757156020000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6025ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531abe7a7277757156020000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-03-08 06:53:48 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7999ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 13ms


Started GET "/store/" for 127.0.0.1 at 2014-03-08 14:53:48 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7066ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (7.1ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7254ms
Completed 200 OK in 29ms (Views: 27.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 14:53:49 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-08 14:53:49 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.8578ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 10.3229ms


Started GET "/store/products" for 127.0.0.1 at 2014-03-08 19:43:50 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 5.0969ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1400ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (158.8ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2187ms
Completed 200 OK in 590ms (Views: 526.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-08 19:43:52 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-08 19:43:55 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1596ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531b027b7277752183000000'), "updated_at"=>2014-03-08 11:43:55 UTC, "created_at"=>2014-03-08 11:43:55 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.3071ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7423ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531b027b7277752183010000'), "purchase_id"=>BSON::ObjectId('531b027b7277752183000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-08 11:43:55 UTC, "created_at"=>2014-03-08 11:43:55 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.8908ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531b027b7277752183000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7904ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531b027b7277752183000000')} update={"$set"=>{"total_price"=>10.0, "updated_at"=>2014-03-08 11:43:55 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 14.9935ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 191ms


Started GET "/store/cart" for 127.0.0.1 at 2014-03-08 19:43:55 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9830ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531b027b7277752183000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7200ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531b027b7277752183000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3481ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531b027b7277752183000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.9563ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8827ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (406.7ms)
Completed 200 OK in 444ms (Views: 436.3ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 19:43:56 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-03-08 19:44:04 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MkYrMeRmwtruzR5nabghVOU4mRZI/oi0pcwFsUdXWU0=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0896ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0936ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531b027b7277752183000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8703ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531b027b7277752183000000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-03-08 11:44:04 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.1853ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 24ms


Started GET "/store/" for 127.0.0.1 at 2014-03-08 19:44:04 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 3.3199ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (144.8ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4788ms
Completed 200 OK in 191ms (Views: 189.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-08 19:44:04 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-08 19:44:05 +0800
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1364ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9386ms


Started GET "/store/" for 127.0.0.1 at 2014-03-09 14:43:15 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 40.1428ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 101.1482ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (293.6ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 78.5814ms
Completed 200 OK in 916ms (Views: 854.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:17 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 14:43:19 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0359ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531c0d877277752fae000000'), "updated_at"=>2014-03-09 06:43:19 UTC, "created_at"=>2014-03-09 06:43:19 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 49.2358ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.8764ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531c0d877277752fae010000'), "purchase_id"=>BSON::ObjectId('531c0d877277752fae000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-09 06:43:19 UTC, "created_at"=>2014-03-09 06:43:19 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 90.1297ms
Completed 500 Internal Server Error in 260ms

NameError (undefined local variable or method `line_items' for #<Ecom::Purchase:0x00000002504888>):
  app/models/ecom/purchase.rb:19:in `recalculate_price!'
  app/controllers/ecom/cart_controller.rb:14:in `add'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (73.9ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 14:43:34 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7745ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6288ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531c0d967277752fae020000'), "updated_at"=>2014-03-09 06:43:34 UTC, "created_at"=>2014-03-09 06:43:34 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7979ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6044ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531c0d967277752fae030000'), "purchase_id"=>BSON::ObjectId('531c0d967277752fae020000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-09 06:43:34 UTC, "created_at"=>2014-03-09 06:43:34 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.4989ms
Completed 500 Internal Server Error in 37ms

NameError (undefined local variable or method `line_items' for #<Ecom::Purchase:0x007f8b2057db88>):
  app/models/ecom/purchase.rb:19:in `recalculate_price!'
  app/controllers/ecom/cart_controller.rb:14:in `add'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (130.1ms)


Started GET "/store/" for 127.0.0.1 at 2014-03-09 14:43:38 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.1192ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8769ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (14.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7400ms
Completed 200 OK in 49ms (Views: 44.5ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:38 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:38 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:38 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:38 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:38 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:38 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:38 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 14:43:38 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:39 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:39 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:39 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:39 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 14:43:39 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 14:43:39 +0800


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-03-09 14:44:16 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 2.0113ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 16.2584ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2539ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (34.2ms)
Completed 200 OK in 544ms (Views: 453.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:16 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 14:44:17 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 14:44:18 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6137ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 4.2637ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531c0dc27277753057000000'), "updated_at"=>2014-03-09 06:44:18 UTC, "created_at"=>2014-03-09 06:44:18 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.1065ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6285ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531c0dc27277753057010000'), "purchase_id"=>BSON::ObjectId('531c0dc27277753057000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-09 06:44:18 UTC, "created_at"=>2014-03-09 06:44:18 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7645ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c0dc27277753057000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6352ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c0dc27277753057000000')} update={"$set"=>{"price_total"=>10.0, "updated_at"=>2014-03-09 06:44:18 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 19.0456ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 202ms


Started GET "/store/cart" for 127.0.0.1 at 2014-03-09 14:44:18 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9185ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c0dc27277753057000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.3751ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c0dc27277753057000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.2961ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c0dc27277753057000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0217ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9763ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (643.0ms)
Completed 500 Internal Server Error in 671ms

ActionView::Template::Error (undefined method `total_price' for #<Ecom::Purchase:0x0000000509b938>):
    18:   <% end %>
    19:   <tr>
    20:     <td>Total:</td>
    21:     <td><%= number_to_currency @cart.total_price %></td>
    22:   </tr>
    23: </table>
    24: 
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:21:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__1955099707308433840_43042700'
  actionview (4.1.0.rc1) lib/action_view/template.rb:144:in `block in render'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/template.rb:338:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/template.rb:142:in `render'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.0.rc1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.0.rc1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.0.rc1) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.0.rc1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.0.rc1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.1.0.rc1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (51.3ms)


Started GET "/store/cart" for 127.0.0.1 at 2014-03-09 14:44:49 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7471ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6504ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c0dc27277753057000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7675ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c0dc27277753057000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0537ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c0dc27277753057000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7160ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6790ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (14.4ms)
Completed 200 OK in 40ms (Views: 32.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:49 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:49 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:49 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:50 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-03-09 14:44:55 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MkYrMeRmwtruzR5nabghVOU4mRZI/oi0pcwFsUdXWU0=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7256ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5356ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c0dc27277753057000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5214ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c0dc27277753057000000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-03-09 06:44:55 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7935ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 13ms


Started GET "/store/" for 127.0.0.1 at 2014-03-09 14:44:55 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8891ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (10.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7329ms
Completed 200 OK in 32ms (Views: 30.9ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 14:44:55 +0800


Started GET "/store/" for 127.0.0.1 at 2014-03-09 21:36:56 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.2422ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6395ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (90.5ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8817ms
Completed 200 OK in 329ms (Views: 294.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 21:36:56 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 21:36:56 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 21:36:56 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 21:36:56 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 21:36:56 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 21:36:56 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 21:36:57 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 21:36:57 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 21:36:57 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 21:36:57 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 21:36:57 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 21:36:57 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 21:36:57 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 21:36:57 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 21:36:58 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8383ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531c6e7a7277753eff000000'), "updated_at"=>2014-03-09 13:36:58 UTC, "created_at"=>2014-03-09 13:36:58 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9325ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7565ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531c6e7a7277753eff010000'), "purchase_id"=>BSON::ObjectId('531c6e7a7277753eff000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-09 13:36:58 UTC, "created_at"=>2014-03-09 13:36:58 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.0714ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c6e7a7277753eff000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1534ms
Completed 500 Internal Server Error in 127ms

NoMethodError (undefined method `price_total=' for #<Ecom::Purchase:0x007fbf8809d1d0>):
  app/decorators/models/ecom/purchase_decorator.rb:15:in `recalculate_price!'
  app/controllers/ecom/cart_controller.rb:14:in `add'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (33.7ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 21:38:29 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.5849ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8161ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531c6ed57277753fb1000000'), "updated_at"=>2014-03-09 13:38:29 UTC, "created_at"=>2014-03-09 13:38:29 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.9710ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6198ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531c6ed57277753fb1010000'), "purchase_id"=>BSON::ObjectId('531c6ed57277753fb1000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-09 13:38:29 UTC, "created_at"=>2014-03-09 13:38:29 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 13.4579ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c6ed57277753fb1000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7112ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c6ed57277753fb1000000')} update={"$set"=>{"price_total"=>10.0, "updated_at"=>2014-03-09 13:38:29 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.1268ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 172ms


Started GET "/store/cart" for 127.0.0.1 at 2014-03-09 21:38:29 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8167ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c6ed57277753fb1000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6963ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c6ed57277753fb1000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8936ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c6ed57277753fb1000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6537ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7536ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (363.2ms)
Completed 200 OK in 597ms (Views: 591.1ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:30 +0800


Started POST "/store/cart/checkout" for 127.0.0.1 at 2014-03-09 21:38:32 +0800
Processing by Ecom::CartController#checkout as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MkYrMeRmwtruzR5nabghVOU4mRZI/oi0pcwFsUdXWU0=", "commit"=>"Checkout"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0038ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.0348ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c6ed57277753fb1000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8132ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c6ed57277753fb1000000')} update={"$set"=>{"state"=>"order_placed", "updated_at"=>2014-03-09 13:38:32 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.2779ms
Redirected to http://localhost:3000/store/
Completed 302 Found in 20ms


Started GET "/store/" for 127.0.0.1 at 2014-03-09 21:38:32 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.4879ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (25.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.4539ms
Completed 200 OK in 63ms (Views: 59.6ms)


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 21:38:32 +0800


Started GET "/store/products" for 127.0.0.1 at 2014-03-09 22:13:42 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3290ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5986ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (22.8ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9019ms
Completed 200 OK in 328ms (Views: 229.9ms)


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 22:13:42 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:13:44 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7662ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7583ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531c7718727775425c000000'), "updated_at"=>2014-03-09 14:13:44 UTC, "created_at"=>2014-03-09 14:13:44 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.1693ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6375ms
Completed 500 Internal Server Error in 120ms

NoMethodError (undefined method `make_items' for Ecom::LineItem:Class):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:12:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (33.7ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:15:04 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.9203ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1479ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_purchases documents=[{"state"=>"cart_in_progress", "_id"=>BSON::ObjectId('531c7768727775434b000000'), "updated_at"=>2014-03-09 14:15:04 UTC, "created_at"=>2014-03-09 14:15:04 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 1.1338ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7222ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531c7768727775434b010000'), "purchase_id"=>BSON::ObjectId('531c7768727775434b000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-09 14:15:04 UTC, "created_at"=>2014-03-09 14:15:04 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.8868ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7134ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} update={"$set"=>{"price_total"=>10.0, "updated_at"=>2014-03-09 14:15:04 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 14.6811ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 191ms


Started GET "/store/cart" for 127.0.0.1 at 2014-03-09 22:15:04 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9615ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7947ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (98.2ms)
Completed 500 Internal Server Error in 211ms

ActionView::Template::Error (undefined method `line_items' for nil:NilClass):
    1: <h1>Shopping Cart</h1>
    2: 
    3: <% unless @cart.line_items.any? %>
    4:   <p>You don't have any items in your cart. <%= link_to "Go Add Some", products_path %>
    5: <% end %>
    6: 
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:3:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__1563760619196359938_22184340'
  actionview (4.1.0.rc1) lib/action_view/template.rb:144:in `block in render'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/template.rb:338:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/template.rb:142:in `render'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.0.rc1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.0.rc1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.0.rc1) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.0.rc1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.0.rc1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.1.0.rc1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (29.1ms)


Started GET "/store/cart" for 127.0.0.1 at 2014-03-09 22:17:19 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.4833ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8674ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6629ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (91.2ms)
Completed 500 Internal Server Error in 260ms

ActionView::Template::Error (undefined method `line_items' for nil:NilClass):
    1: <h1>Shopping Cart</h1>
    2: 
    3: <% unless @cart.line_items.any? %>
    4:   <p>You don't have any items in your cart. <%= link_to "Go Add Some", products_path %>
    5: <% end %>
    6: 
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:3:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb__2786041436198136020_24370460'
  actionview (4.1.0.rc1) lib/action_view/template.rb:144:in `block in render'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/template.rb:338:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/template.rb:142:in `render'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.0.rc1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.0.rc1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.0.rc1) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.0.rc1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.0.rc1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.1.0.rc1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (25.9ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:17:25 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7242ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6514ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6199ms
Completed 500 Internal Server Error in 12ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.1ms)


Started GET "/store/products" for 127.0.0.1 at 2014-03-09 22:41:20 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.7170ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0397ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (38.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.1898ms
Completed 200 OK in 513ms (Views: 361.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 22:41:21 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 22:41:22 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:41:22 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7028ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5709ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5375ms
Completed 500 Internal Server Error in 106ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (102.9ms)


Started GET "/store/products" for 127.0.0.1 at 2014-03-09 22:42:13 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6715ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5733ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (8.1ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7307ms
Completed 200 OK in 29ms (Views: 27.2ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:13 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 22:42:14 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:42:15 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.6966ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5892ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5763ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7002ms
  MOPED: 127.0.0.1:27017 INSERT       database=project10_development collection=ecom_line_items documents=[{"_id"=>BSON::ObjectId('531c7dc772777546d6000000'), "purchase_id"=>BSON::ObjectId('531c7768727775434b000000'), "product_id"=>BSON::ObjectId('52ddbd5972777514d4000000'), "price"=>10.0, "updated_at"=>2014-03-09 14:42:15 UTC, "created_at"=>2014-03-09 14:42:15 UTC}] flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7790ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6788ms
  MOPED: 127.0.0.1:27017 UPDATE       database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} update={"$set"=>{"price_total"=>20.0, "updated_at"=>2014-03-09 14:42:15 UTC}} flags=[]
                         COMMAND      database=project10_development command={:getlasterror=>1, :w=>1} runtime: 0.7497ms
Redirected to http://localhost:3000/store/cart
Completed 302 Found in 133ms


Started GET "/store/cart" for 127.0.0.1 at 2014-03-09 22:42:15 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8014ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.5669ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.1209ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_line_items selector={"purchase_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7917ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6694ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"$query"=>{"_id"=>BSON::ObjectId('52ddbd5972777514d4000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9584ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (364.3ms)
Completed 200 OK in 389ms (Views: 382.8ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:15 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:15 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:15 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:15 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:15 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:15 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:15 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:16 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:16 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 22:42:16 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:16 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:16 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 22:42:16 +0800


Started GET "/store/cart" for 127.0.0.1 at 2014-03-09 22:45:26 +0800
Processing by Ecom::CartController#show as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.3346ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.7506ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6339ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb within layouts/ecom/application (88.5ms)
Completed 500 Internal Server Error in 318ms

ActionView::Template::Error (undefined method `line_items' for nil:NilClass):
    1: <h1>Shopping Cart</h1>
    2: 
    3: <% unless @cart.line_items.any? %>
    4:   <p>You don't have any items in your cart. <%= link_to "Go Add Some", products_path %>
    5: <% end %>
    6: 
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/cart/show.html.erb:3:in `__home_rwub_rails__book_book_________hapter____ecom_app_views_ecom_cart_show_html_erb___1670116778499429505_17262320'
  actionview (4.1.0.rc1) lib/action_view/template.rb:144:in `block in render'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:161:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/template.rb:338:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/template.rb:142:in `render'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:53:in `render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/template_renderer.rb:17:in `render'
  actionview (4.1.0.rc1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.1.0.rc1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:99:in `_render_template'
  actionpack (4.1.0.rc1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:82:in `render_to_body'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.1.0.rc1) lib/action_controller/metal/renderers.rb:32:in `render_to_body'
  actionpack (4.1.0.rc1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'
  activesupport (4.1.0.rc1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/rwub/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (4.1.0.rc1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:41:in `block in render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:40:in `render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (25.5ms)


Started GET "/store/products" for 127.0.0.1 at 2014-03-09 22:51:26 +0800
Processing by Ecom::ProductsController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 3.9862ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 1.0670ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (148.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2840ms
Completed 200 OK in 588ms (Views: 516.8ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 22:51:27 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 22:51:27 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 22:51:27 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 22:51:27 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 22:51:27 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 22:51:27 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 22:51:27 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 22:51:28 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 22:51:28 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 22:51:28 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 22:51:28 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 22:51:28 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 22:51:28 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 22:51:28 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:51:29 +0800

AbstractController::ActionNotFound (The action 'add' could not be found for Ecom::CartController):
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:131:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/unknown_action.html.erb within rescues/layout (1.2ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:52:20 +0800

RuntimeError (Circular dependency detected while autoloading constant Ecom::CartController):
  app/controllers/ecom/cart_controller.rb:4:in `<module:Ecom>'
  app/controllers/ecom/cart_controller.rb:3:in `<top (required)>'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.8ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (33.9ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:52:30 +0800

RuntimeError (Circular dependency detected while autoloading constant Ecom::CartController):
  app/controllers/ecom/cart_controller.rb:4:in `<module:Ecom>'
  app/controllers/ecom/cart_controller.rb:3:in `<top (required)>'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (38.6ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 22:52:42 +0800

RuntimeError (Circular dependency detected while autoloading constant Ecom::CartController):
  app/controllers/ecom/cart_controller.rb:3:in `<top (required)>'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (38.4ms)


Started GET "/store/products" for 127.0.0.1 at 2014-03-09 23:06:07 +0800
Processing by Ecom::ProductsController#index as HTML
  Parameters: {"controllers"=>{"cart"=>"cart"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.6239ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.7026ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/index.html.erb within layouts/ecom/application (30.1ms)
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 1.2728ms
Completed 200 OK in 432ms (Views: 309.0ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 23:06:07 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 23:06:08 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 23:06:08 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 23:06:08 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 23:06:08 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 23:06:08 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 23:06:09 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"controllers"=>{"cart"=>"cart"}, "id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0794ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.9683ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.8759ms
Completed 500 Internal Server Error in 164ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (108.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (172.0ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 23:06:25 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"controllers"=>{"cart"=>"cart"}, "id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7919ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6544ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6336ms
Completed 500 Internal Server Error in 25ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (39.1ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 23:06:28 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"controllers"=>{"cart"=>"cart"}, "id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7849ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6897ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6285ms
Completed 500 Internal Server Error in 9ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (87.1ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (123.0ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 23:07:24 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"controllers"=>{"cart"=>"cart"}, "id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7288ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.5728ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.4866ms
Completed 500 Internal Server Error in 23ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.5ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.3ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (35.7ms)


Started GET "/store/products/dan-brown-inferno" for 127.0.0.1 at 2014-03-09 23:07:38 +0800
Processing by Ecom::ProductsController#show as HTML
  Parameters: {"controllers"=>{"cart"=>"cart"}, "id"=>"dan-brown-inferno"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 1.0930ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_products selector={"_slugs"=>{"$in"=>["dan-brown-inferno"]}} flags=[] limit=1 skip=0 batch_size=nil fields=nil runtime: 0.9622ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.8686ms
  Rendered /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/views/ecom/products/show.html.erb within layouts/ecom/application (7.9ms)
Completed 200 OK in 154ms (Views: 144.4ms)


Started GET "/assets/ecom/application.css?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/bootstrap.css?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/cart.css?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/categories.css?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/products.css?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/categories.js?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/products.js?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/cart.js?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/application.js?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/sticky-footer-navbar.css?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/add-to-cart-button.png" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/assets/ecom/bootstrap.js?body=1" for 127.0.0.1 at 2014-03-09 23:07:38 +0800


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 23:07:40 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"controllers"=>{"cart"=>"cart"}, "id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7302ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6703ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 0.6263ms
Completed 500 Internal Server Error in 11ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.4ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (6.6ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.4ms)


Started GET "/store/cart/add/52ddbd5972777514d4000000" for 127.0.0.1 at 2014-03-09 23:08:27 +0800
Processing by Ecom::CartController#add as HTML
  Parameters: {"controllers"=>{"cart"=>"cart"}, "id"=>"52ddbd5972777514d4000000"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} runtime: 0.7865ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_users selector={"$query"=>{"_id"=>BSON::ObjectId('52d5d19c72777517c8000000')}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 batch_size=nil fields=nil runtime: 0.6350ms
  MOPED: 127.0.0.1:27017 QUERY        database=project10_development collection=ecom_purchases selector={"_id"=>BSON::ObjectId('531c7768727775434b000000')} flags=[] limit=0 skip=0 batch_size=nil fields=nil runtime: 3.3182ms
Completed 500 Internal Server Error in 123ms

NoMethodError (undefined method `save' for nil:NilClass):
  /home/rwub/rails4-book/book/6294OS_Chapter_10/ecom/app/controllers/ecom/cart_controller.rb:9:in `add'
  actionpack (4.1.0.rc1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:189:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:113:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:229:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:166:in `block in halting'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:86:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `block in instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.1.0.rc1) lib/active_support/notifications.rb:159:in `instrument'
  actionpack (4.1.0.rc1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.1.0.rc1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  actionpack (4.1.0.rc1) lib/abstract_controller/base.rb:136:in `process'
  actionview (4.1.0.rc1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:195:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_controller/metal.rb:231:in `block in action'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:80:in `dispatch'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:48:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `public_send'
  railties (4.1.0.rc1) lib/rails/railtie.rb:194:in `method_missing'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:71:in `block in call'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `each'
  actionpack (4.1.0.rc1) lib/action_dispatch/journey/router.rb:59:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/routing/route_set.rb:676:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.5.2) lib/rack/etag.rb:23:in `call'
  rack (1.5.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.5.2) lib/rack/head.rb:11:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/flash.rb:254:in `call'
  rack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/cookies.rb:551:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/callbacks.rb:82:in `run_callbacks'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.1.0.rc1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.1.0.rc1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.1.0.rc1) lib/active_support/cache/strategy/local_cache.rb:87:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.1.0.rc1) lib/action_dispatch/middleware/static.rb:64:in `call'
  rack (1.5.2) lib/rack/sendfile.rb:112:in `call'
  railties (4.1.0.rc1) lib/rails/engine.rb:515:in `call'
  railties (4.1.0.rc1) lib/rails/application.rb:142:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  puma (2.8.1) lib/puma/server.rb:490:in `handle_request'
  puma (2.8.1) lib/puma/server.rb:361:in `process_client'
  puma (2.8.1) lib/puma/server.rb:254:in `block in run'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `call'
  puma (2.8.1) lib/puma/thread_pool.rb:92:in `block in spawn_thread'


  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.9ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.7ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.0ms)
  Rendered /home/rwub/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-4.1.0.rc1/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.7ms)
